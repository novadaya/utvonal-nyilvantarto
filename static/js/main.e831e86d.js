/*! For license information please see main.e831e86d.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case x:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ie=null;function xe(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function ke(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==Ee||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Le=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Le=!1}function Oe(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Ve=!1,ze=null,Ue={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Oe.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,It,xt,kt=!1,Tt=[],Ct=null,Nt=null,Dt=null,At=new Map,Pt=new Map,Lt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Vt(e)&&n.delete(t)}function Ut(){kt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==Nt&&Vt(Nt)&&(Nt=null),null!==Dt&&Vt(Dt)&&(Dt=null),At.forEach(zt),Pt.forEach(zt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),null!==Dt&&jt(Dt,e),At.forEach(t),Pt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Lt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Qt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Wt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Wt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Wt=null;function Yt(e,t,n,r){if(Wt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=F({},un,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return In}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(kn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Dn=sn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(An),Ln=[9,13,27,32],Rn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Mn=c&&"TextEvent"in window&&!On,Fn=c&&(!Rn||On&&8<On&&11>=On),Vn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Hn=null;function Wn(e){Vr(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Hn=Qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,_e(e)),Ae(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==W(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Qr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Ir={};function xr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}c&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=xr("animationend"),Tr=xr("animationiteration"),Cr=xr("animationstart"),Nr=xr("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Ar.length;Lr++){var Rr=Ar[Lr];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(je.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Fe;Me=!1,Fe=null,Ve||(Ve=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}}}if(Ve)throw e=ze,Ve=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=_e(n),o=[];e:{var a=Dr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case Tr:case Cr:l=yn;break;case Nr:l=Dn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&c.push(Gr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)c=Hr(c),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Hr(c),d=Hr(d)}c=null}else c=null;null!==l&&Wr(o,a,l,c,!1),null!==u&&null!==h&&Wr(o,h,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Kn(a))if(Xn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Qr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=jn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Pe(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function Ii(e){return{current:e}}function xi(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function ki(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Di=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){xi(Ni),xi(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(s(168));ki(Ci,t),ki(Ni,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Di=Ci.current,ki(Ci,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ci),ki(Ci,e)):xi(Ni),ki(Ni,n)}var Vi=null,zi=!1,Ui=!1;function ji(e){null===Vi?Vi=[e]:Vi.push(e)}function Bi(){if(!Ui&&null!==Vi){Ui=!0;var e=0,t=wt;try{var n=Vi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,zi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,Bi),i}finally{wt=t,Ui=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Hi=[],Wi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function Zi(e,t,n){Hi[Wi++]=$i,Hi[Wi++]=Xi,Hi[Wi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else $i=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Wi],Hi[Wi]=null,Xi=Hi[--Wi],Hi[Wi]=null,$i=Hi[--Wi],Hi[Wi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Ss(e){var t=ys.current;xi(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Ts(e){null===ks?ks=[e]:ks.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ts(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function As(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Ts(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var zs=(new r.Component).refs;function Us(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var js={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Ls(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(ru(t,e,i,r),Os(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Ls(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(ru(t,e,i,r),Os(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Ls(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Rs(e,i,r))&&(ru(t,e,r,n),Os(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=xs(s):(i=Pi(t)?Di:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=js,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&js.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zs,As(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=xs(s):(s=Pi(t)?Di:Ci.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Us(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&js.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===zs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ws(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Ws(s)===t.type)?((r=i(t,n.props)).ref=Qs(e,t,n),r.return=e,r):((r=Ou(n.type,n.key,n.props,null,e.mode,r)).ref=Qs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=Qs(e,null,t),n.return=e,n;case S:return(t=zu(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Mu(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),is&&Ji(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return is&&Ji(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,m),u}function g(i,a,l,u){var c=O(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Ji(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return is&&Ji(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===E){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&Ws(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Qs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===E?((s=Mu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Ou(o.type,o.key,o.props,null,r.mode,l)).ref=Qs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=zu(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(O(o))return g(r,s,o,l);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Vu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Xs=Ys(!1),Js={},Zs=Ii(Js),eo=Ii(Js),to=Ii(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Zs),ki(Zs,t)}function io(){xi(Zs),xi(eo),xi(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(xi(Zs),xi(eo))}var ao=Ii(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ua,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function xo(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,mo.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=mo,r=To(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,zo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&po)||Lo(n,t,i)}return i}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Oo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&ru(t,e,1,-1)}function Vo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return To().memoizedState}function jo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=zo(t,n,s,r))}mo.flags|=e,i.memoizedState=zo(1|t,n,s,r)}function qo(e,t){return jo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Qo(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return To().memoizedState}function ta(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){ru(n,e,r,tu()),sa(n,t,r)}}function na(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ts(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Cs(e,t,i,r))&&(ru(n,e,r,i=tu()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:xs,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:xs,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:xs,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Dl)throw Error(s(349));0!==(30&po)||Lo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Dl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:xs,useCallback:$o,useContext:xs,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Xo,useReducer:No,useRef:Uo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),go.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ua={readContext:xs,useCallback:$o,useContext:xs,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Xo,useReducer:Do,useRef:Uo,useState:function(){return Do(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[Do(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ls(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=r),da(0,t)},n}function ma(e,t,n){(n=Ls(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ls(-1,1)).tag=2,Rs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Xs(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=xo(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Lu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Ru(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function xa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Rl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Rl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Rl,Ll),Ll|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Rl,Ll),Ll|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Pi(n)?Di:Ci.current;return s=Ai(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=xo(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xs(u):u=Ai(t,u=Pi(n)?Di:Ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Ks(t,o,r,u),Ds=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ds?("function"===typeof c&&(Us(t,n,c,r),l=t.memoizedState),(a=Ds||Bs(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:gs(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=xs(l):l=Ai(t,l=Pi(n)?Di:Ci.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ks(t,o,r,l),Ds=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ds?("function"===typeof f&&(Us(t,n,f,r),p=t.memoizedState),(u=Ds||Bs(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,La,Ra,Oa,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fu(l,i,0,null),e=Mu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):za(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(o=Mu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Dl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),ru(r,e,i,-1))}return gu(),Ua(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Wi++]=$i,Hi[Wi++]=Xi,Hi[Wi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ru(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ru(r,a):(a=Mu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Ru(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Pi(t.type)&&Li(),Ha(t),null;case 3:return r=t.stateNode,io(),xi(Ni),xi(Ci),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),La(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)zr(Or[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":$(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":Q(r),Z(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)zr(Or[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&w(e,o,c,l))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(xi(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(au(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ol&&(Ol=3):gu())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),La(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Ss(t.type._context),Ha(t),null;case 19:if(xi(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Qa(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Qa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>ql&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*Xe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Ni),xi(Ci),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){xu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xu(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Nu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){xu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){xu(e,e.return,g)}try{rl(5,e,e.return)}catch(g){xu(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){xu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),we(l,a);var c=we(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,c)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){xu(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){xu(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){xu(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Xe())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(c=Xa)||h,gl(t,e),Xa=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xu(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){xu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){xu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){xu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=$a;var u=Xa;if($a=o,(Xa=l)&&!u)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Za=l):El(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,$a=a,Xa=u}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sl(t)}catch(f){xu(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xu(t,i,l)}}var s=t.return;try{sl(t)}catch(l){xu(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){xu(t,o,l)}}}catch(l){xu(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Il,xl=Math.ceil,kl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Nl=0,Dl=null,Al=null,Pl=0,Ll=0,Rl=Ii(0),Ol=0,Ml=null,Fl=0,Vl=0,zl=0,Ul=null,jl=null,Bl=0,ql=1/0,Kl=null,Gl=!1,Ql=null,Hl=null,Wl=!1,Yl=null,$l=0,Xl=0,Jl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Nl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===eu&&(eu=mt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function ru(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Dl||(e===Dl&&(0===(2&Nl)&&(Vl|=n),4===Ol&&lu(e,Pl)),iu(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=Xe()+500,zi&&Bi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Dl?Pl:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){zi=!0,ji(e)}(uu.bind(null,e)):ji(uu.bind(null,e)),oi((function(){0===(6&Nl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Du(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Dl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Nl;Nl|=2;var o=mu();for(Dl===e&&Pl===t||(Kl=null,ql=Xe()+500,fu(e,t));;)try{wu();break}catch(l){pu(e,l)}_s(),kl.current=o,Nl=i,null!==Al?t=0:(Dl=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Ml,fu(e,0),lu(e,r),iu(e,Xe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Ml,fu(e,0),lu(e,r),iu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Su(e,jl,Kl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Su.bind(null,e,jl,Kl),t);break}Su(e,jl,Kl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(Su.bind(null,e,jl,Kl),r);break}Su(e,jl,Kl);break;default:throw Error(s(329))}}}return iu(e,Xe()),e.callbackNode===n?su.bind(null,e):null}function ou(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=jl,jl=n,null!==t&&au(t)),e}function au(e){null===jl?jl=e:jl.push.apply(jl,e)}function lu(e,t){for(t&=~zl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Nl))throw Error(s(327));Eu();var t=dt(e,0);if(0===(1&t))return iu(e,Xe()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ml,fu(e,0),lu(e,t),iu(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,jl,Kl),iu(e,Xe()),null}function cu(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=Xe()+500,zi&&Bi())}}function hu(e){null!==Yl&&0===Yl.tag&&0===(6&Nl)&&Eu();var t=Nl;Nl|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Nl=t))&&Bi()}}function du(){Ll=Rl.current,xi(Rl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:io(),xi(Ni),xi(Ci),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:du()}n=n.return}if(Dl=e,Al=e=Ru(e.current,null),Pl=Ll=t,Ol=0,Ml=null,zl=Vl=Fl=0,jl=Ul=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pu(e,t){for(;;){var n=Al;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,Tl.current=null,null===n||null===n.return){Ol=1,Ml=t,Al=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ga(o,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ca(u,l));break e}}o=u=ca(u,l),4!==Ol&&(Ol=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,u,t));break e;case 1:l=u;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hl||!Hl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_u(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mu(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Dl||0===(268435455&Fl)&&0===(268435455&Vl)||lu(Dl,Pl)}function yu(e,t){var n=Nl;Nl|=2;var r=mu();for(Dl===e&&Pl===t||(Kl=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(_s(),Nl=n,kl.current=r,null!==Al)throw Error(s(261));return Dl=null,Pl=0,Ol}function vu(){for(;null!==Al;)bu(Al)}function wu(){for(;null!==Al&&!Ye();)bu(Al)}function bu(e){var t=Il(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?_u(e):Al=t,Tl.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Ll)))return void(Al=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function Su(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Eu()}while(null!==Yl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Dl&&(Al=Dl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Du(tt,(function(){return Eu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Nl;Nl|=4,Tl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){xu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),$e(),Nl=l,wt=a,Cl.transition=o}else e.current=n;if(Wl&&(Wl=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&$l)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Bi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Eu(){if(null!==Yl){var e=bt($l),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===c){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){xu(l,l.return,S)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Nl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Iu(e,t,n){e=Rs(e,t=pa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function xu(e,t,n){if(3===e.tag)Iu(e,e,n);else for(;null!==t;){if(3===t.tag){Iu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Rs(t,e=ma(t,e=ca(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Xe()-Bl?fu(e,0):zl|=n),iu(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ns(e,t))&&(yt(e,t,n),iu(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tu(e,n)}function Du(e,t){return He(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Au(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Lu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Mu(n.children,i,o,t);case I:a=8,i|=8;break;case x:return(e=Pu(12,n,t,2|i)).elementType=x,e.lanes=o,e;case N:return(e=Pu(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Pu(19,n,t,i)).elementType=D,e.lanes=o,e;case L:return Fu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case T:a=9;break e;case C:a=11;break e;case A:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,i,s,o,a,l){return e=new Uu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},As(s),e}function Bu(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function qu(e,t,n,r,i,s,o,a,l){return(e=ju(n,r,!0,e,0,s,0,a,l)).context=Bu(null),n=e.current,(s=Ls(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Rs(n,s,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function Ku(e,t,n,r){var i=t.current,s=tu(),o=nu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ls(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Rs(i,t,o))&&(ru(e,i,o,s),Os(e,i,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Da(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(ki(ao,1&ao.current),null!==(e=Ga(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return Ga(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,As(t),i.updater=js,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Da(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Va(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ls(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Es(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=xs(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Is(t,n),qs(t,r,i),Gs(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return xa(e,t,n)}throw Error(s(156,t.tag))};var Wu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function $u(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Gu(o);a.call(e)}}Ku(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gu(o);s.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gu(l);a.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hu((function(){Ku(t,l,n,r)})),l}(n,t,e,i,r);return Gu(o)}$u.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Ku(e,t,null,null)},$u.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Ku(null,e,null,null)})),t[pi]=null}},$u.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),iu(t,Xe()),0===(6&Nl)&&(ql=Xe()+500,Bi()))}break;case 13:hu((function(){var t=Ns(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Hu(e,1)}},St=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)ru(t,e,134217728,tu());Hu(e,134217728)}},Et=function(e){if(13===e.tag){var t=nu(e),n=Ns(e,t);if(null!==n)ru(n,e,t,tu());Hu(e,t)}},It=function(){return wt},xt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cu,Ne=hu;var tc={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Te,cu]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(s(299));var n=!1,r="",i=Wu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Wu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $u(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+C(a=e[u],u);l+=N(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,c=s+C(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},L={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:L,ReactCurrentOwner:E};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!I.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,L(S);else{var t=r(c);null!==t&&R(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&R(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,x=null,k=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function D(){if(null!==x){var e=t.unstable_now();C=e;var n=!0;try{n=x(!0,e)}finally{n?E():(I=!1,x=null)}}else I=!1}if("function"===typeof w)E=function(){w(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=D,E=function(){P.postMessage(null)}}else E=function(){y(D,0)};function L(e){x=e,I||(I=!0,E())}function R(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(k),k=-1):g=!0,R(_,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,L(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".853183b0.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="utvonal-nyilvantarto:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkutvonal_nyilvantarto=self.webpackChunkutvonal_nyilvantarto||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>_e,SDK_VERSION:()=>_t,_DEFAULT_ENTRY_NAME:()=>ut,_addComponent:()=>ft,_addOrOverwriteComponent:()=>pt,_apps:()=>ht,_clearComponents:()=>vt,_components:()=>dt,_getProvider:()=>gt,_registerComponent:()=>mt,_removeServiceInstance:()=>yt,deleteApp:()=>xt,getApp:()=>Et,getApps:()=>It,initializeApp:()=>St,onLog:()=>Tt,registerVersion:()=>kt,setLogLevel:()=>Ct});var t,r=n(43),i=n.t(r,2),s=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const a="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:u=!1}=i,f=s.history,p=t.Pop,m=null,g=y();function y(){return(f.state||{idx:null}).idx}function v(){p=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(o({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(s,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(a,v),m=e,()=>{s.removeEventListener(a,v),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let i=h(b.location,e,n);r&&r(i,e),g=y()+1;let o=c(i,g),a=b.createHref(i);try{f.pushState(o,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;s.location.assign(a)}u&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,n){p=t.Replace;let i=h(b.location,e,n);r&&r(i,e),g=y();let s=c(i,g),o=b.createHref(i);f.replaceState(s,"",o),u&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=N(r);s=T(i[o],e)}return s}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=A([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,u,a)),(null!=e.path||e.index)&&t.push({path:a,score:k(a,e.index),routesMeta:u})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))i(e,t,r);else i(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=v(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:[\w-]+$/,b=3,_=2,S=1,E=10,I=-2,x=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=I),t&&(r+=_),n.filter((e=>!x(e))).reduce(((e,t)=>e+(w.test(t)?b:""===t?S:E)),r)}function T(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;s.push({params:r,pathname:A([i,u.pathname]),pathnameBase:P(A([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=A([i,u.pathnameBase]))}return s}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function N(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const A=e=>e.join("/").replace(/\/\/+/g,"/"),P=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");Error;function L(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const R=["post","put","patch","delete"],O=(new Set(R),["get",...R]);new Set(O),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}const F=r.createContext(null);const V=r.createContext(null);const z=r.createContext(null);const U=r.createContext(null);const j=r.createContext({outlet:null,matches:[],isDataRoute:!1});const B=r.createContext(null);function q(){return null!=r.useContext(U)}function K(){return q()||l(!1),r.useContext(U).location}function G(e,n,i,s){q()||l(!1);let{navigator:o}=r.useContext(z),{matches:a}=r.useContext(j),u=a[a.length-1],c=u?u.params:{},h=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let d,p=K();if(n){var m;let e="string"===typeof n?f(n):n;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||l(!1),d=e}else d=p;let y=d.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=g(e,{pathname:v});let b=$(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:A([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:A([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&b?r.createElement(U.Provider,{value:{location:M({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function Q(){let e=function(){var e;let t=r.useContext(B),n=J(X.UseRouteError),i=Z(X.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=L(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const H=r.createElement(Q,null);class W extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(j.Provider,{value:this.props.routeContext},r.createElement(B.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(F);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(j.Provider,{value:t},i)}function $(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,u=null==(s=n)?void 0:s.errors;if(null!=u){let e=a.findIndex((e=>e.route.id&&(null==u?void 0:u[e.route.id])));e>=0||l(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,l=!1,d=null,f=null;var p;n&&(o=u&&i.route.id?u[i.route.id]:void 0,d=i.route.errorElement||H,c&&(h<0&&0===s?(p="route-fallback",!1||ee[p]||(ee[p]=!0),l=!0,f=null):h===s&&(l=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:l?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Y,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(W,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var X=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(X||{});function J(e){let t=r.useContext(V);return t||l(!1),t}function Z(e){let t=function(e){let t=r.useContext(j);return t||l(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const ee={};i.startTransition;function te(e){l(!1)}function ne(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:u=!1,future:c}=e;q()&&l(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:u,future:M({v7_relativeSplatPath:!1},c)})),[h,c,a,u]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,w=r.useMemo((()=>{let e=D(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:o}}),[h,p,m,g,y,v,o]);return null==w?null:r.createElement(z.Provider,{value:d},r.createElement(U.Provider,{children:i,value:w}))}function re(e){let{children:t,location:n}=e;return G(ie(t),n)}new Promise((()=>{}));r.Component;function ie(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ie(e.props.children,s));e.type!==te&&l(!1),e.props.index&&e.props.children&&l(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ie(e.props.children,s)),n.push(o)})),n}var se=n(579);function oe(){return(0,se.jsxs)("div",{className:"home",children:[(0,se.jsxs)("div",{className:"header",children:[(0,se.jsx)("h1",{className:"title",children:"\xdatvonal Nyilv\xe1ntart\xf3"}),(0,se.jsx)("p",{children:"V\xe1lasz az al\xe1bbi lehet\u0151s\xe9gek k\xf6z\xfcl!"})]}),(0,se.jsxs)("div",{className:"box-container",children:[(0,se.jsxs)("div",{className:"box",children:[(0,se.jsx)("h2",{children:"\xdaj \xfatvonal adatok megad\xe1sa"}),(0,se.jsx)("button",{className:"default-button",onClick:()=>window.location="/userinputs",children:"Tov\xe1bb"})]}),(0,se.jsxs)("div",{className:"box",children:[(0,se.jsx)("h2",{children:"Megl\xe9v\u0151 adatok lek\xe9rdez\xe9se"}),(0,se.jsx)("button",{className:"default-button",onClick:()=>window.location="/listvehicles",children:"Tov\xe1bb"})]}),(0,se.jsxs)("div",{className:"box",children:[(0,se.jsx)("h2",{children:"J\xe1rm\u0171 Hozz\xe1ad\xe1sa"}),(0,se.jsx)("button",{className:"default-button",onClick:()=>window.location="/addcar",children:"Tov\xe1bb"})]})]})]})}function ae(){return(0,se.jsx)("div",{className:"back-to-home",children:(0,se.jsx)("button",{className:"back-button",onClick:()=>window.location="/",children:"Vissza"})})}const le=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(le(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ce;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const he=function(e){return function(e){const t=le(e);return ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},de=function(e){try{return ue.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function fe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=fe(e[n],t[n]));return e}const pe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,me=()=>{try{return pe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&de(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ge=()=>{var e;return null===(e=me())||void 0===e?void 0:e.config};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ve(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function we(){return!function(){var e;const t=null===(e=me())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){try{return"object"===typeof indexedDB}catch(e){return!1}}class _e extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}}class Se{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ee,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new _e(n,s,t)}}const Ee=/\{\$([^}]+)}/g;function Ie(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ke(n)&&ke(s)){if(!xe(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ke(e){return null!==e&&"object"===typeof e}function Te(e,t){const n=new Ce(e,t);return n.subscribe.bind(n)}class Ce{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ne),void 0===r.error&&(r.error=Ne),void 0===r.complete&&(r.complete=Ne);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ne(){}function De(e){return e&&e._delegate?e._delegate:e}class Ae{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pe="[DEFAULT]";class Le{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ye;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pe})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Pe?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe;return this.component?this.component.multipleInstances?e:Pe:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Le(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Oe=[];var Me;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Me||(Me={}));const Fe={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Ve=Me.INFO,ze={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Ue=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ze[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class je{constructor(e){this.name=e,this._logLevel=Ve,this._logHandler=Ue,this._userLogHandler=null,Oe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Fe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...t),this._logHandler(this,Me.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...t),this._logHandler(this,Me.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Me.INFO,...t),this._logHandler(this,Me.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Me.WARN,...t),this._logHandler(this,Me.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...t),this._logHandler(this,Me.ERROR,...t)}}const Be=(e,t)=>t.some((t=>e instanceof t));let qe,Ke;const Ge=new WeakMap,Qe=new WeakMap,He=new WeakMap,We=new WeakMap,Ye=new WeakMap;let $e={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Qe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||He.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ze(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Xe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ke||(Ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(et(this),n),Ze(Ge.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ze(e.apply(et(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(et(this),t,...r);return He.set(s,t.sort?t.sort():[t]),Ze(s)}}function Je(e){return"function"===typeof e?Xe(e):(e instanceof IDBTransaction&&function(e){if(Qe.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Qe.set(e,t)}(e),Be(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,$e):e)}function Ze(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ze(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ge.set(t,e)})).catch((()=>{})),Ye.set(t,e),t}(e);if(We.has(e))return We.get(e);const t=Je(e);return t!==e&&(We.set(e,t),Ye.set(t,e)),t}const et=e=>Ye.get(e);const tt=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],rt=new Map;function it(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(rt.get(t))return rt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=nt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return rt.set(t,s),s}$e=(e=>({...e,get:(t,n,r)=>it(t,n)||e.get(t,n,r),has:(t,n)=>!!it(t,n)||e.has(t,n)}))($e);class st{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ot="@firebase/app",at="0.9.28",lt=new je("@firebase/app"),ut="[DEFAULT]",ct={[ot]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,dt=new Map;function ft(e,t){try{e.container.addComponent(t)}catch(n){lt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function pt(e,t){e.container.addOrOverwriteComponent(t)}function mt(e){const t=e.name;if(dt.has(t))return lt.debug("There were multiple attempts to register component ".concat(t,".")),!1;dt.set(t,e);for(const n of ht.values())ft(n,e);return!0}function gt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut;gt(e,t).clearInstance(n)}function vt(){dt.clear()}const wt=new Se("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class bt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ae("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wt.create("app-deleted",{appName:this._name})}}const _t="10.8.1";function St(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ut,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wt.create("bad-app-name",{appName:String(i)});if(n||(n=ge()),!n)throw wt.create("no-options");const s=ht.get(i);if(s){if(xe(n,s.options)&&xe(r,s.config))return s;throw wt.create("duplicate-app",{appName:i})}const o=new Re(i);for(const l of dt.values())o.addComponent(l);const a=new bt(n,r,o);return ht.set(i,a),a}function Et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;const t=ht.get(e);if(!t&&e===ut&&ge())return St();if(!t)throw wt.create("no-app",{appName:e});return t}function It(){return Array.from(ht.values())}async function xt(e){const t=e.name;ht.has(t)&&(ht.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function kt(e,t,n){var r;let i=null!==(r=ct[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void lt.warn(e.join(" "))}mt(new Ae("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Tt(e,t){if(null!==e&&"function"!==typeof e)throw wt.create("invalid-log-argument");!function(e,t){for(const n of Oe){let r=null;t&&t.level&&(r=Fe[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Me[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Ct(e){var t;t=e,Oe.forEach((e=>{e.setLogLevel(t)}))}const Nt="firebase-heartbeat-database",Dt=1,At="firebase-heartbeat-store";let Pt=null;function Lt(){return Pt||(Pt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ze(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ze(o.result),e.oldVersion,e.newVersion,Ze(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Nt,Dt,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(At)}catch(n){console.warn(n)}}}).catch((e=>{throw wt.create("idb-open",{originalErrorMessage:e.message})}))),Pt}async function Rt(e,t){try{const n=(await Lt()).transaction(At,"readwrite"),r=n.objectStore(At);await r.put(t,Ot(e)),await n.done}catch(n){if(n instanceof _e)lt.warn(n.message);else{const e=wt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});lt.warn(e.message)}}}function Ot(e){return"".concat(e.name,"!").concat(e.options.appId)}class Mt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Vt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ft();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ft(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),zt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=he(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ft(){return(new Date).toISOString().substring(0,10)}class Vt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!be()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Lt()).transaction(At),n=await t.objectStore(At).get(Ot(e));return await t.done,n}catch(t){if(t instanceof _e)lt.warn(t.message);else{const e=wt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});lt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Rt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Rt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function zt(e){return he(JSON.stringify({version:2,heartbeats:e})).length}var Ut;Ut="",mt(new Ae("platform-logger",(e=>new st(e)),"PRIVATE")),mt(new Ae("heartbeat",(e=>new Mt(e)),"PRIVATE")),kt(ot,at,Ut),kt(ot,at,"esm2017"),kt("fire-js","");class jt{constructor(e,t){this._delegate=e,this.firebase=t,ft(e,new Ae("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),xt(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ft(this._delegate,e)}_addOrOverwriteComponent(e){pt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Bt=new Se("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const qt=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=St(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ie(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:kt,setLogLevel:Ct,onLog:Tt,apps:null,SDK_VERSION:_t,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(mt(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Bt.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&fe(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ie(n,e=e||ut))throw Bt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(jt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){fe(n,e)},createSubscribe:Te,ErrorFactory:Se,deepExtend:fe}),n}(),Kt=new je("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Kt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Kt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Gt=qt;!function(e){kt("@firebase/app-compat","0.2.28",e)}();Gt.registerVersion("firebase","10.8.1","app-compat");var Qt,Ht="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Wt={},Yt=Yt||{},$t=Ht||self;function Xt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Jt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Zt="closure_uid_"+(1e9*Math.random()>>>0),en=0;function tn(e,t,n){return e.call.apply(e.bind,arguments)}function nn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function rn(e,t,n){return(rn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tn:nn).apply(null,arguments)}function sn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function on(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function an(){this.s=this.s,this.o=this.o}an.prototype.s=!1,an.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Zt)&&e[Zt]||(e[Zt]=++en))},an.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ln=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function un(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function cn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Xt(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function hn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var dn=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};$t.addEventListener("test",e,t),$t.removeEventListener("test",e,t)}catch(n){}return e}();function fn(e){return/^[\s\xa0]*$/.test(e)}function pn(){var e=$t.navigator;return e&&(e=e.userAgent)?e:""}function mn(e){return-1!=pn().indexOf(e)}function gn(e){return gn[" "](e),e}gn[" "]=function(){};var yn,vn,wn=mn("Opera"),bn=mn("Trident")||mn("MSIE"),_n=mn("Edge"),Sn=_n||bn,En=mn("Gecko")&&!(-1!=pn().toLowerCase().indexOf("webkit")&&!mn("Edge"))&&!(mn("Trident")||mn("MSIE"))&&!mn("Edge"),In=-1!=pn().toLowerCase().indexOf("webkit")&&!mn("Edge");function xn(){var e=$t.document;return e?e.documentMode:void 0}e:{var kn="",Tn=function(){var e=pn();return En?/rv:([^\);]+)(\)|;)/.exec(e):_n?/Edge\/([\d\.]+)/.exec(e):bn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):In?/WebKit\/(\S+)/.exec(e):wn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Tn&&(kn=Tn?Tn[1]:""),bn){var Cn=xn();if(null!=Cn&&Cn>parseFloat(kn)){yn=String(Cn);break e}}yn=kn}if($t.document&&bn){var Nn=xn();vn=Nn||(parseInt(yn,10)||void 0)}else vn=void 0;var Dn=vn;function An(e,t){if(hn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(En){e:{try{gn(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Pn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&An.$.h.call(this)}}on(An,hn);var Pn={2:"touch",3:"pen",4:"mouse"};An.prototype.h=function(){An.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ln="closure_listenable_"+(1e6*Math.random()|0),Rn=0;function On(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Rn,this.fa=this.ia=!1}function Mn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Fn(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Vn(e){const t={};for(const n in e)t[n]=e[n];return t}const zn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Un(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<zn.length;t++)n=zn[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function jn(e){this.src=e,this.g={},this.h=0}function Bn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ln(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Mn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function qn(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}jn.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=qn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new On(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Kn="closure_lm_"+(1e6*Math.random()|0),Gn={};function Qn(e,t,n,r,i){if(r&&r.once)return Wn(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qn(e,t[s],n,r,i);return null}return n=tr(n),e&&e[Ln]?e.O(t,n,Jt(r)?!!r.capture:!!r,i):Hn(e,t,n,!1,r,i)}function Hn(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Jt(i)?!!i.capture:!!i,a=Zn(e);if(a||(e[Kn]=a=new jn(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Jn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Xn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wn(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Wn(e,t[s],n,r,i);return null}return n=tr(n),e&&e[Ln]?e.P(t,n,Jt(r)?!!r.capture:!!r,i):Hn(e,t,n,!0,r,i)}function Yn(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Yn(e,t[s],n,r,i);else r=Jt(r)?!!r.capture:!!r,n=tr(n),e&&e[Ln]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=qn(s=e.g[t],n,r,i))&&(Mn(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Zn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=qn(t,n,r,i)),(n=-1<e?t[e]:null)&&$n(n))}function $n(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ln])Bn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Xn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zn(t))?(Bn(n,e),0==n.h&&(n.src=null,t[Kn]=null)):Mn(e)}}}function Xn(e){return e in Gn?Gn[e]:Gn[e]="on"+e}function Jn(e,t){if(e.fa)e=!0;else{t=new An(t,this);var n=e.listener,r=e.la||e.src;e.ia&&$n(e),e=n.call(r,t)}return e}function Zn(e){return(e=e[Kn])instanceof jn?e:null}var er="__closure_events_fn_"+(1e9*Math.random()>>>0);function tr(e){return"function"===typeof e?e:(e[er]||(e[er]=function(t){return e.handleEvent(t)}),e[er])}function nr(){an.call(this),this.i=new jn(this),this.S=this,this.J=null}function rr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new hn(t,e);else if(t instanceof hn)t.target=t.target||e;else{var i=t;Un(t=new hn(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ir(o,r,!0,t)&&i}if(i=ir(o=t.g=e,r,!0,t)&&i,i=ir(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ir(o=t.g=n[s],r,!1,t)&&i}function ir(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Bn(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}on(nr,an),nr.prototype[Ln]=!0,nr.prototype.removeEventListener=function(e,t,n,r){Yn(this,e,t,n,r)},nr.prototype.N=function(){if(nr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mn(n[r]);delete t.g[e],t.h--}}this.J=null},nr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},nr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sr=$t.JSON.stringify;function or(){var e=fr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ar=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new lr),(e=>e.reset()));class lr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ur(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function cr(e){$t.setTimeout((()=>{throw e}),0)}let hr,dr=!1,fr=new class{constructor(){this.h=this.g=null}add(e,t){const n=ar.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},pr=()=>{const e=$t.Promise.resolve(void 0);hr=()=>{e.then(mr)}};var mr=()=>{for(var e;e=or();){try{e.h.call(e.g)}catch(n){cr(n)}var t=ar;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}dr=!1};function gr(e,t){nr.call(this),this.h=e||1,this.g=t||$t,this.j=rn(this.qb,this),this.l=Date.now()}function yr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function vr(e,t,n){if("function"===typeof e)n&&(e=rn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=rn(e.handleEvent,e)}return 2147483647<Number(t)?-1:$t.setTimeout(e,t||0)}function wr(e){e.g=vr((()=>{e.g=null,e.i&&(e.i=!1,wr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}on(gr,nr),(Qt=gr.prototype).ga=!1,Qt.T=null,Qt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rr(this,"tick"),this.ga&&(yr(this),this.start()))}},Qt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qt.N=function(){gr.$.N.call(this),yr(this),delete this.g};class br extends an{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wr(this)}N(){super.N(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(e){an.call(this),this.h=e,this.g={}}on(_r,an);var Sr=[];function Er(e,t,n,r){Array.isArray(n)||(n&&(Sr[0]=n.toString()),n=Sr);for(var i=0;i<n.length;i++){var s=Qn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ir(e){Fn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$n(e)}),e),e.g={}}function xr(){this.g=!0}function kr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return sr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}_r.prototype.N=function(){_r.$.N.call(this),Ir(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xr.prototype.Ea=function(){this.g=!1},xr.prototype.info=function(){};var Tr={},Cr=null;function Nr(){return Cr=Cr||new nr}function Dr(e){hn.call(this,Tr.Ta,e)}function Ar(e){const t=Nr();rr(t,new Dr(t))}function Pr(e,t){hn.call(this,Tr.STAT_EVENT,e),this.stat=t}function Lr(e){const t=Nr();rr(t,new Pr(t,e))}function Rr(e,t){hn.call(this,Tr.Ua,e),this.size=t}function Or(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return $t.setTimeout((function(){e()}),t)}Tr.Ta="serverreachability",on(Dr,hn),Tr.STAT_EVENT="statevent",on(Pr,hn),Tr.Ua="timingevent",on(Rr,hn);var Mr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Vr(){}function zr(e){return e.h||(e.h=e.i())}function Ur(){}Vr.prototype.h=null;var jr,Br={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qr(){hn.call(this,"d")}function Kr(){hn.call(this,"c")}function Gr(){}function Qr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new _r(this),this.P=Wr,e=Sn?125:void 0,this.V=new gr(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Hr}function Hr(){this.i=null,this.g="",this.h=!1}on(qr,hn),on(Kr,hn),on(Gr,Vr),Gr.prototype.g=function(){return new XMLHttpRequest},Gr.prototype.i=function(){return{}},jr=new Gr;var Wr=45e3,Yr={},$r={};function Xr(e,t,n){e.L=1,e.A=gi(hi(t)),e.u=n,e.S=!0,Jr(e,null)}function Jr(e,t){e.G=Date.now(),ni(e),e.B=hi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ni(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Hr,e.g=Ds(e.l,n?t:null,!e.u),0<e.O&&(e.M=new br(rn(e.Pa,e,e.g),e.O)),Er(e.U,e.g,"readystatechange",e.nb),t=e.I?Vn(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ar(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Zr(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ei(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=ti(e,n),r==$r){4==t&&(e.s=4,Lr(14),i=!1),kr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Yr){e.s=4,Lr(15),kr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}kr(e.j,e.m,r,null),ai(e,r)}Zr(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Lr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ss(t),t.M=!0,Lr(11))):(kr(e.j,e.m,n,"[Invalid Chunked Response]"),oi(e),si(e))}function ti(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?$r:(n=Number(t.substring(n,r)),isNaN(n)?Yr:(r+=1)+n>t.length?$r:(t=t.slice(r,r+n),e.o=r+n,t))}function ni(e){e.Y=Date.now()+e.P,ri(e,e.P)}function ri(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Or(rn(e.lb,e),t)}function ii(e){e.C&&($t.clearTimeout(e.C),e.C=null)}function si(e){0==e.l.H||e.J||xs(e.l,e)}function oi(e){ii(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,yr(e.V),Ir(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ai(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Mi(n.i,e)))if(!e.K&&Mi(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Is(n),ps(n)}_s(n),Lr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Or(rn(n.ib,n),6e3));if(1>=Oi(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Ts(n,11)}else if((e.K||n.g==e)&&Is(n),!fn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Fi(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,mi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ns(r,r.J?r.pa:null,r.Y),o.K){Vi(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ii(a),ni(a)),r.g=o}else bs(r);0<n.j.length&&gs(n)}else"stop"!=u[0]&&"close"!=u[0]||Ts(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Ts(n,7):fs(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ar()}catch(u){}}function li(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Xt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Xt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Xt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Qt=Qr.prototype).setTimeout=function(e){this.P=e},Qt.nb=function(e){e=e.target;const t=this.M;t&&3==as(e)?t.l():this.Pa(e)},Qt.Pa=function(e){try{if(e==this.g)e:{const c=as(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Sn||this.g&&(this.h.h||this.g.ja()||ls(this.g)))){this.J||4!=c||7==t||Ar(),ii(this);var n=this.g.da();this.ca=n;t:if(Zr(this)){var r=ls(this.g);e="";var i=r.length,s=4==as(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){oi(this),si(this);var o="";break t}this.h.i=new $t.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fn(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Lr(12),oi(this),si(this);break e}kr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ai(this,n)}this.S?(ei(this,c,o),Sn&&this.i&&3==c&&(Er(this.U,this.V,"tick",this.mb),this.V.start())):(kr(this.j,this.m,o,null),ai(this,o)),4==c&&oi(this),this.i&&!this.J&&(4==c?xs(this.l,this):(this.i=!1,ni(this)))}else(function(e){const t={};e=(e.g&&2<=as(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(fn(e[r]))continue;var n=ur(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Lr(12)):(this.s=0,Lr(13)),oi(this),si(this)}}}catch(c){}},Qt.mb=function(){if(this.g){var e=as(this.g),t=this.g.ja();this.o<t.length&&(ii(this),ei(this,e,t),this.i&&4!=e&&ni(this))}},Qt.cancel=function(){this.J=!0,oi(this)},Qt.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ar(),Lr(17)),oi(this),this.s=2,si(this)):ri(this,this.Y-e)};var ui=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ci(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ci){this.h=e.h,di(this,e.j),this.s=e.s,this.g=e.g,fi(this,e.m),this.l=e.l;var t=e.i,n=new xi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pi(this,n),this.o=e.o}else e&&(t=String(e).match(ui))?(this.h=!1,di(this,t[1]||"",!0),this.s=yi(t[2]||""),this.g=yi(t[3]||"",!0),fi(this,t[4]),this.l=yi(t[5]||"",!0),pi(this,t[6]||"",!0),this.o=yi(t[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}function hi(e){return new ci(e)}function di(e,t,n){e.j=n?yi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function fi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function pi(e,t,n){t instanceof xi?(e.i=t,function(e,t){t&&!e.j&&(ki(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ti(this,t),Ni(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vi(t,Ei)),e.i=new xi(t,e.h))}function mi(e,t,n){e.i.set(t,n)}function gi(e){return mi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ci.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vi(t,bi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vi(t,bi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vi(n,"/"==n.charAt(0)?Si:_i,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vi(n,Ii)),e.join("")};var bi=/[#\/\?@]/g,_i=/[#\?:]/g,Si=/[#\?]/g,Ei=/[#\?@]/g,Ii=/#/g;function xi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ki(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ti(e,t){ki(e),t=Di(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ci(e,t){return ki(e),t=Di(e,t),e.g.has(t)}function Ni(e,t,n){Ti(e,t),0<n.length&&(e.i=null,e.g.set(Di(e,t),un(n)),e.h+=n.length)}function Di(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Qt=xi.prototype).add=function(e,t){ki(this),this.i=null,e=Di(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Qt.forEach=function(e,t){ki(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Qt.ta=function(){ki(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Qt.Z=function(e){ki(this);let t=[];if("string"===typeof e)Ci(this,e)&&(t=t.concat(this.g.get(Di(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Qt.set=function(e,t){return ki(this),this.i=null,Ci(this,e=Di(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Qt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ai=class{constructor(e,t){this.g=e,this.map=t}};function Pi(e){this.l=e||Li,$t.PerformanceNavigationTiming?e=0<(e=$t.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!($t.g&&$t.g.Ka&&$t.g.Ka()&&$t.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Li=10;function Ri(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Oi(e){return e.h?1:e.g?e.g.size:0}function Mi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Fi(e,t){e.g?e.g.add(t):e.h=t}function Vi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function zi(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return un(e.i)}Pi.prototype.cancel=function(){if(this.i=zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ui,ji=class{stringify(e){return $t.JSON.stringify(e,void 0)}parse(e){return $t.JSON.parse(e,void 0)}};function Bi(){this.g=new ji}function qi(e,t,n){const r=n||"";try{li(e,(function(e,n){let i=e;Jt(e)&&(i=sr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ki(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Gi(e){this.l=e.ec||null,this.j=e.ob||!1}function Qi(e,t){nr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Hi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}on(Gi,Vr),Gi.prototype.g=function(){return new Qi(this.l,this.j)},Gi.prototype.i=(Ui={},function(){return Ui}),on(Qi,nr);var Hi=0;function Wi(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Yi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,$i(e)}function $i(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Qt=Qi.prototype).open=function(e,t){if(this.readyState!=Hi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,$i(this)},Qt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||$t).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yi(this)),this.readyState=Hi},Qt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof $t.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wi(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Qt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yi(this):$i(this),3==this.readyState&&Wi(this)}},Qt.Za=function(e){this.g&&(this.response=this.responseText=e,Yi(this))},Qt.Ya=function(e){this.g&&(this.response=e,Yi(this))},Qt.ka=function(){this.g&&Yi(this)},Qt.setRequestHeader=function(e,t){this.v.append(e,t)},Qt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Qt.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Xi=$t.JSON.parse;function Ji(e){nr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Zi,this.L=this.M=!1}on(Ji,nr);var Zi="",es=/^https?$/i,ts=["POST","PUT"];function ns(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rs(e),ss(e)}function rs(e){e.F||(e.F=!0,rr(e,"complete"),rr(e,"error"))}function is(e){if(e.h&&"undefined"!=typeof Yt&&(!e.C[1]||4!=as(e)||2!=e.da()))if(e.v&&4==as(e))vr(e.La,0,e);else if(rr(e,"readystatechange"),4==as(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(ui)[1]||null;!i&&$t.self&&$t.self.location&&(i=$t.self.location.protocol.slice(0,-1)),r=!es.test(i?i.toLowerCase():"")}n=r}if(n)rr(e,"complete"),rr(e,"success");else{e.m=6;try{var s=2<as(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",rs(e)}}finally{ss(e)}}}function ss(e,t){if(e.g){os(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||rr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function os(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&($t.clearTimeout(e.A),e.A=null)}function as(e){return e.g?e.g.readyState:0}function ls(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Zi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(go){return null}}function us(e){let t="";return Fn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function cs(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=us(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):mi(e,t,n))}function hs(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ds(e){this.Ga=0,this.j=[],this.l=new xr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hs("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hs("baseRetryDelayMs",5e3,e),this.hb=hs("retryDelaySeedMs",1e4,e),this.eb=hs("forwardChannelMaxRetries",2,e),this.xa=hs("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Pi(e&&e.concurrentRequestLimit),this.Ja=new Bi,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function fs(e){if(ms(e),3==e.H){var t=e.W++,n=hi(e.I);if(mi(n,"SID",e.K),mi(n,"RID",t),mi(n,"TYPE","terminate"),vs(e,n),(t=new Qr(e,e.l,t)).L=2,t.A=gi(hi(n)),n=!1,$t.navigator&&$t.navigator.sendBeacon)try{n=$t.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&$t.Image&&((new Image).src=t.A,n=!0),n||(t.g=Ds(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ni(t)}Cs(e)}function ps(e){e.g&&(Ss(e),e.g.cancel(),e.g=null)}function ms(e){ps(e),e.u&&($t.clearTimeout(e.u),e.u=null),Is(e),e.i.cancel(),e.m&&("number"===typeof e.m&&$t.clearTimeout(e.m),e.m=null)}function gs(e){if(!Ri(e.i)&&!e.m){e.m=!0;var t=e.Na;hr||pr(),dr||(hr(),dr=!0),fr.add(t,e),e.C=0}}function ys(e,t){var n;n=t?t.m:e.W++;const r=hi(e.I);mi(r,"SID",e.K),mi(r,"RID",n),mi(r,"AID",e.V),vs(e,r),e.o&&e.s&&cs(r,e.o,e.s),n=new Qr(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ws(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Fi(e.i,n),Xr(n,r,t)}function vs(e,t){e.na&&Fn(e.na,(function(e,n){mi(t,n,e)})),e.h&&li({},(function(e,n){mi(t,n,e)}))}function ws(e,t,n){n=Math.min(e.j.length,n);var r=e.h?rn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{qi(a,e,"req"+n+"_")}catch(La){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function bs(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;hr||pr(),dr||(hr(),dr=!0),fr.add(t,e),e.A=0}}function _s(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Or(rn(e.Ma,e),ks(e,e.A)),e.A++,!0)}function Ss(e){null!=e.B&&($t.clearTimeout(e.B),e.B=null)}function Es(e){e.g=new Qr(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=hi(e.wa);mi(t,"RID","rpc"),mi(t,"SID",e.K),mi(t,"AID",e.V),mi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&mi(t,"TO",e.qa),mi(t,"TYPE","xmlhttp"),vs(e,t),e.o&&e.s&&cs(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=gi(hi(t)),n.u=null,n.S=!0,Jr(n,e)}function Is(e){null!=e.v&&($t.clearTimeout(e.v),e.v=null)}function xs(e,t){var n=null;if(e.g==t){Is(e),Ss(e),e.g=null;var r=2}else{if(!Mi(e.i,t))return;n=t.F,Vi(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;rr(r=Nr(),new Rr(r,n)),gs(e)}else bs(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Oi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Or(rn(e.Na,e,t),ks(e,e.C)),e.C++,!0))}(e,t)||2==r&&_s(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ts(e,5);break;case 4:Ts(e,10);break;case 3:Ts(e,6);break;default:Ts(e,2)}}function ks(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ts(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=rn(e.pb,e);n||(n=new ci("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||di(n,"https"),gi(n)),function(e,t){const n=new xr;if($t.Image){const r=new Image;r.onload=sn(Ki,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sn(Ki,n,r,"TestLoadImage: error",!1,t),r.onabort=sn(Ki,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sn(Ki,n,r,"TestLoadImage: timeout",!1,t),$t.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Lr(2);e.H=0,e.h&&e.h.za(t),Cs(e),ms(e)}function Cs(e){if(e.H=0,e.ma=[],e.h){const t=zi(e.i);0==t.length&&0==e.j.length||(cn(e.ma,t),cn(e.ma,e.j),e.i.i.length=0,un(e.j),e.j.length=0),e.h.ya()}}function Ns(e,t,n){var r=n instanceof ci?hi(n):new ci(n);if(""!=r.g)t&&(r.g=t+"."+r.g),fi(r,r.m);else{var i=$t.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ci(null);r&&di(s,r),t&&(s.g=t),i&&fi(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&mi(r,n,t),mi(r,"VER",e.ra),vs(e,r),r}function Ds(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Ji(new Gi({ob:n})):new Ji(e.va)).Oa(e.J),t}function As(){}function Ps(){if(bn&&!(10<=Number(Dn)))throw Error("Environmental error: no available transport.")}function Ls(e,t){nr.call(this),this.g=new ds(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!fn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ms(this)}function Rs(e){qr.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Os(){Kr.call(this),this.status=1}function Ms(e){this.g=e}function Fs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Vs(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function zs(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Qt=Ji.prototype).Oa=function(e){this.M=e},Qt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jr.g(),this.C=this.u?zr(this.u):zr(jr),this.g.onreadystatechange=rn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void ns(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=$t.FormData&&e instanceof $t.FormData,!(0<=ln(ts,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{os(this),0<this.B&&((this.L=function(e){return bn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rn(this.ua,this)):this.A=vr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ns(this,s)}},Qt.ua=function(){"undefined"!=typeof Yt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rr(this,"timeout"),this.abort(8))},Qt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,rr(this,"complete"),rr(this,"abort"),ss(this))},Qt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ss(this,!0)),Ji.$.N.call(this)},Qt.La=function(){this.s||(this.G||this.v||this.l?is(this):this.kb())},Qt.kb=function(){is(this)},Qt.isActive=function(){return!!this.g},Qt.da=function(){try{return 2<as(this)?this.g.status:-1}catch(Ui){return-1}},Qt.ja=function(){try{return this.g?this.g.responseText:""}catch(Ui){return""}},Qt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Xi(t)}},Qt.Ia=function(){return this.m},Qt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Qt=ds.prototype).ra=8,Qt.H=1,Qt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Qr(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Vn(s),Un(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ws(this,i,t),mi(n=hi(this.I),"RID",e),mi(n,"CVER",22),this.F&&mi(n,"X-HTTP-Session-Id",this.F),vs(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(us(s)))+"&"+t:this.o&&cs(n,this.o,s)),Fi(this.i,i),this.bb&&mi(n,"TYPE","init"),this.P?(mi(n,"$req",t),mi(n,"SID","null"),i.aa=!0,Xr(i,n,null)):Xr(i,n,t),this.H=2}}else 3==this.H&&(e?ys(this,e):0==this.j.length||Ri(this.i)||ys(this))},Qt.Ma=function(){if(this.u=null,Es(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Or(rn(this.jb,this),e)}},Qt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Lr(10),ps(this),Es(this))},Qt.ib=function(){null!=this.v&&(this.v=null,ps(this),_s(this),Lr(19))},Qt.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Lr(2)):(this.l.info("Failed to ping google.com"),Lr(1))},Qt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Qt=As.prototype).Ba=function(){},Qt.Aa=function(){},Qt.za=function(){},Qt.ya=function(){},Qt.isActive=function(){return!0},Qt.Va=function(){},Ps.prototype.g=function(e,t){return new Ls(e,t)},on(Ls,nr),Ls.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Lr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ns(e,null,e.Y),gs(e)},Ls.prototype.close=function(){fs(this.g)},Ls.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=sr(e),e=n);t.j.push(new Ai(t.fb++,e)),3==t.H&&gs(t)},Ls.prototype.N=function(){this.g.h=null,delete this.j,fs(this.g),delete this.g,Ls.$.N.call(this)},on(Rs,qr),on(Os,Kr),on(Ms,As),Ms.prototype.Ba=function(){rr(this.g,"a")},Ms.prototype.Aa=function(e){rr(this.g,new Rs(e))},Ms.prototype.za=function(e){rr(this.g,new Os)},Ms.prototype.ya=function(){rr(this.g,"b")},on(Fs,(function(){this.blockSize=-1})),Fs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Fs.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Vs(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Vs(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Vs(this,r),i=0;break}}this.h=i,this.i+=t},Fs.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Us={};function js(e){return-128<=e&&128>e?function(e,t){var n=Us;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new zs([0|e],0>e?-1:0)})):new zs([0|e],0>e?-1:0)}function Bs(e){if(isNaN(e)||!isFinite(e))return Ks;if(0>e)return Ys(Bs(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=qs;return new zs(t,0)}var qs=4294967296,Ks=js(0),Gs=js(1),Qs=js(16777216);function Hs(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ws(e){return-1==e.h}function Ys(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new zs(n,~e.h).add(Gs)}function $s(e,t){return e.add(Ys(t))}function Xs(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Js(e,t){this.g=e,this.h=t}function Zs(e,t){if(Hs(t))throw Error("division by zero");if(Hs(e))return new Js(Ks,Ks);if(Ws(e))return t=Zs(Ys(e),t),new Js(Ys(t.g),Ys(t.h));if(Ws(t))return t=Zs(e,Ys(t)),new Js(Ys(t.g),t.h);if(30<e.g.length){if(Ws(e)||Ws(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Gs,r=t;0>=r.X(e);)n=eo(n),r=eo(r);var i=to(n,1),s=to(r,1);for(r=to(r,2),n=to(n,2);!Hs(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=to(r,1),n=to(n,1)}return t=$s(e,i.R(t)),new Js(i,t)}for(i=Ks;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Bs(n)).R(t);Ws(o)||0<o.X(e);)o=(s=Bs(n-=r)).R(t);Hs(s)&&(s=Gs),i=i.add(s),e=$s(e,o)}return new Js(i,e)}function eo(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new zs(n,e.h)}function to(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new zs(i,e.h)}(Qt=zs.prototype).ea=function(){if(Ws(this))return-Ys(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:qs+r)*t,t*=qs}return e},Qt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Hs(this))return"0";if(Ws(this))return"-"+Ys(this).toString(e);for(var t=Bs(Math.pow(e,6)),n=this,r="";;){var i=Zs(n,t).g,s=((0<(n=$s(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Hs(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Qt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Qt.X=function(e){return Ws(e=$s(this,e))?-1:Hs(e)?0:1},Qt.abs=function(){return Ws(this)?Ys(this):this},Qt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new zs(n,-2147483648&n[n.length-1]?-1:0)},Qt.R=function(e){if(Hs(this)||Hs(e))return Ks;if(Ws(this))return Ws(e)?Ys(this).R(Ys(e)):Ys(Ys(this).R(e));if(Ws(e))return Ys(this.R(Ys(e)));if(0>this.X(Qs)&&0>e.X(Qs))return Bs(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Xs(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Xs(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Xs(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Xs(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new zs(n,0)},Qt.gb=function(e){return Zs(this,e).h},Qt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new zs(n,this.h&e.h)},Qt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new zs(n,this.h|e.h)},Qt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new zs(n,this.h^e.h)},Ps.prototype.createWebChannel=Ps.prototype.g,Ls.prototype.send=Ls.prototype.u,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,Mr.NO_ERROR=0,Mr.TIMEOUT=8,Mr.HTTP_ERROR=6,Fr.COMPLETE="complete",Ur.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",nr.prototype.listen=nr.prototype.O,Ji.prototype.listenOnce=Ji.prototype.P,Ji.prototype.getLastError=Ji.prototype.Sa,Ji.prototype.getLastErrorCode=Ji.prototype.Ia,Ji.prototype.getStatus=Ji.prototype.da,Ji.prototype.getResponseJson=Ji.prototype.Wa,Ji.prototype.getResponseText=Ji.prototype.ja,Ji.prototype.send=Ji.prototype.ha,Ji.prototype.setWithCredentials=Ji.prototype.Oa,Fs.prototype.digest=Fs.prototype.l,Fs.prototype.reset=Fs.prototype.reset,Fs.prototype.update=Fs.prototype.j,zs.prototype.add=zs.prototype.add,zs.prototype.multiply=zs.prototype.R,zs.prototype.modulo=zs.prototype.gb,zs.prototype.compare=zs.prototype.X,zs.prototype.toNumber=zs.prototype.ea,zs.prototype.toString=zs.prototype.toString,zs.prototype.getBits=zs.prototype.D,zs.fromNumber=Bs,zs.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ys(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Bs(Math.pow(n,8)),i=Ks,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Bs(Math.pow(n,o)),i=i.R(o).add(Bs(a))):i=(i=i.R(r)).add(Bs(a))}return i};var no=Wt.createWebChannelTransport=function(){return new Ps},ro=Wt.getStatEventTarget=function(){return Nr()},io=Wt.ErrorCode=Mr,so=Wt.EventType=Fr,oo=Wt.Event=Tr,ao=Wt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},lo=(Wt.FetchXmlHttpFactory=Gi,Wt.WebChannel=Ur),uo=Wt.XhrIo=Ji,co=Wt.Md5=Fs,ho=Wt.Integer=zs;const fo="@firebase/firestore";class po{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}po.UNAUTHENTICATED=new po(null),po.GOOGLE_CREDENTIALS=new po("google-credentials-uid"),po.FIRST_PARTY=new po("first-party-uid"),po.MOCK_USER=new po("mock-user");let mo="10.8.1";const go=new je("@firebase/firestore");function yo(){return go.logLevel}function vo(e){if(go.logLevel<=Me.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_o);go.debug("Firestore (".concat(mo,"): ").concat(e),...i)}}function wo(e){if(go.logLevel<=Me.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_o);go.error("Firestore (".concat(mo,"): ").concat(e),...i)}}function bo(e){if(go.logLevel<=Me.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_o);go.warn("Firestore (".concat(mo,"): ").concat(e),...i)}}function _o(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function So(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(mo,") INTERNAL ASSERTION FAILED: ")+e;throw wo(t),new Error(t)}function Eo(e,t){e||So()}function Io(e,t){return e}const xo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ko extends _e{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class To{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Co{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class No{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(po.UNAUTHENTICATED)))}shutdown(){}}class Do{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ao{constructor(e){this.t=e,this.currentUser=po.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new To;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new To,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{vo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(vo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new To)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(vo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Eo("string"==typeof t.accessToken),new Co(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Eo(null===e||"string"==typeof e),new po(e)}}class Po{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=po.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Lo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Po(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(po.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ro{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Oo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&vo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,vo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{vo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):vo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Eo("string"==typeof e.token),this.R=e.token,new Ro(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Mo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Fo{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Mo(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Vo(e,t){return e<t?-1:e>t?1:0}function zo(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Uo(e){return e+"\0"}class jo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ko(xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ko(xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ko(xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ko(xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jo.fromMillis(Date.now())}static fromDate(e){return jo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new jo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vo(this.nanoseconds,e.nanoseconds):Vo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bo(e)}static min(){return new Bo(new jo(0,0))}static max(){return new Bo(new jo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qo{constructor(e,t,n){void 0===t?t=0:t>e.length&&So(),void 0===n?n=e.length-t:n>e.length-t&&So(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===qo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qo?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ko extends qo{construct(e,t,n){return new Ko(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ko(xo.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ko(e)}static emptyPath(){return new Ko([])}}const Go=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qo extends qo{construct(e,t,n){return new Qo(e,t,n)}static isValidIdentifier(e){return Go.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qo(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ko(xo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ko(xo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ko(xo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ko(xo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qo(t)}static emptyPath(){return new Qo([])}}class Ho{constructor(e){this.path=e}static fromPath(e){return new Ho(Ko.fromString(e))}static fromName(e){return new Ho(Ko.fromString(e).popFirst(5))}static empty(){return new Ho(Ko.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ko.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ko.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ho(new Ko(e.slice()))}}class Wo{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Yo(e){return e.fields.find((e=>2===e.kind))}function $o(e){return e.fields.filter((e=>2!==e.kind))}Wo.UNKNOWN_ID=-1;class Xo{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jo(0,ta.min())}}function Zo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Bo.fromTimestamp(1e9===r?new jo(n+1,0):new jo(n,r));return new ta(i,Ho.empty(),t)}function ea(e){return new ta(e.readTime,e.key,-1)}class ta{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ta(Bo.min(),Ho.empty(),-1)}static max(){return new ta(Bo.max(),Ho.empty(),-1)}}function na(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ho.comparator(e.documentKey,t.documentKey),0!==n?n:Vo(e.largestBatchId,t.largestBatchId))}const ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ia{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function sa(e){if(e.code!==xo.FAILED_PRECONDITION||e.message!==ra)throw e;vo("LocalStore","Unexpectedly lost primary lease")}class oa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&So(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oa?t:oa.resolve(t)}catch(e){return oa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oa.reject(t)}static resolve(e){return new oa(((t,n)=>{t(e)}))}static reject(e){return new oa(((t,n)=>{n(e)}))}static waitFor(e){return new oa(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=oa.resolve(!1);for(const n of e)t=t.next((e=>e?oa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new oa(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new oa(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class aa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new To,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ca(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=ma(t.target.error);this.V.reject(new ca(e,n))}}static open(e,t,n,r){try{return new aa(t,e.transaction(r,n))}catch(e){throw new ca(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(vo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new da(t)}}class la{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===la.S(ve())&&wo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return vo("SimpleDb","Removing database:",e),fa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!be())return!1;if(la.C())return!0;const e=ve(),t=la.S(e),n=0<t&&t<10,r=la.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(vo("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ca(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ko(xo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ko(xo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ca(e,r))},r.onupgradeneeded=e=>{vo("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{vo("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=aa.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),oa.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(vo("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ua{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return fa(this.k.delete())}}class ca extends ko{constructor(e,t){super(xo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function ha(e){return"IndexedDbTransactionError"===e.name}class da{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(vo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(vo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fa(n)}add(e){return vo("SimpleDb","ADD",this.store.name,e,e),fa(this.store.add(e))}get(e){return fa(this.store.get(e)).next((t=>(void 0===t&&(t=null),vo("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return vo("SimpleDb","DELETE",this.store.name,e),fa(this.store.delete(e))}count(){return vo("SimpleDb","COUNT",this.store.name),fa(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new oa(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new oa(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){vo("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new oa(((n,r)=>{t.onerror=e=>{const t=ma(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new oa(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ua(i),o=t(i.primaryKey,i.value,s);if(o instanceof oa){const e=o.catch((e=>(s.done(),oa.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>oa.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fa(e){return new oa(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ma(e.target.error);n(t)}}))}let pa=!1;function ma(e){const t=la.S(ve());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ko("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return pa||(pa=!0,setTimeout((()=>{throw e}),0)),e}}return e}class ga{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){vo("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{vo("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){ha(e)?vo("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await sa(e)}await this.ee(6e4)}))}}class ya{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return oa.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return vo("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(vo("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ea(t);na(r,n)>0&&(n=r)})),new ta(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class va{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function wa(e){return null==e}function ba(e){return 0===e&&1/e==-1/0}function _a(e){return"number"==typeof e&&Number.isInteger(e)&&!ba(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Sa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ia(t)),t=Ea(e.get(n),t);return Ia(t)}function Ea(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ia(e){return e+"\x01\x01"}function xa(e){const t=e.length;if(Eo(t>=2),2===t)return Eo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ko.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&So(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:So()}s=t+2}return new Ko(r)}va._e=-1;const ka=["userId","batchId"];function Ta(e,t){return[e,Sa(t)]}function Ca(e,t,n){return[e,Sa(t),n]}const Na={},Da=["prefixPath","collectionGroup","readTime","documentId"],Aa=["prefixPath","collectionGroup","documentId"],Pa=["collectionGroup","readTime","prefixPath","documentId"],La=["canonicalId","targetId"],Ra=["targetId","path"],Oa=["path","targetId"],Ma=["collectionId","parent"],Fa=["indexId","uid"],Va=["uid","sequenceNumber"],za=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ua=["indexId","uid","orderedDocumentKey"],ja=["userId","collectionPath","documentId"],Ba=["userId","collectionPath","largestBatchId"],qa=["userId","collectionGroup","largestBatchId"],Ka=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ga=[...Ka,"documentOverlays"],Qa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ha=Qa,Wa=[...Ha,"indexConfiguration","indexState","indexEntries"];class Ya extends ia{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function $a(e,t){const n=Io(e);return la.M(n.ae,t)}function Xa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ja(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Za(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class el{constructor(e,t){this.comparator=e,this.root=t||nl.EMPTY}insert(e,t){return new el(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nl.BLACK,null,null))}remove(e){return new el(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:nl.RED,this.left=null!=r?r:nl.EMPTY,this.right=null!=i?i:nl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new nl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return nl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw So();if(this.right.isRed())throw So();const e=this.left.check();if(e!==this.right.check())throw So();return e+(this.isRed()?0:1)}}nl.EMPTY=null,nl.RED=!0,nl.BLACK=!1,nl.EMPTY=new class{constructor(){this.size=0}get key(){throw So()}get value(){throw So()}get color(){throw So()}get left(){throw So()}get right(){throw So()}copy(e,t,n,r,i){return this}insert(e,t,n){return new nl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rl{constructor(e){this.comparator=e,this.data=new el(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new il(this.data.getIterator())}getIteratorFrom(e){return new il(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof rl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new rl(this.comparator);return t.data=e,t}}class il{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sl(e){return e.hasNext()?e.getNext():void 0}class ol{constructor(e){this.fields=e,e.sort(Qo.comparator)}static empty(){return new ol([])}unionWith(e){let t=new rl(Qo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ol(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class al extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ll{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new al("Invalid base64 string: "+e):e}}(e);return new ll(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ll(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ll.EMPTY_BYTE_STRING=new ll("");const ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cl(e){if(Eo(!!e),"string"==typeof e){let t=0;const n=ul.exec(e);if(Eo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:hl(e.seconds),nanos:hl(e.nanos)}}function hl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function dl(e){return"string"==typeof e?ll.fromBase64String(e):ll.fromUint8Array(e)}function fl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pl(e){const t=e.mapValue.fields.__previous_value__;return fl(t)?pl(t):t}function ml(e){const t=cl(e.mapValue.fields.__local_write_time__.timestampValue);return new jo(t.seconds,t.nanos)}class gl{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class yl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}const vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wl={nullValue:"NULL_VALUE"};function bl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fl(e)?4:Rl(e)?9007199254740991:10:So()}function _l(e,t){if(e===t)return!0;const n=bl(e);if(n!==bl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ml(e).isEqual(ml(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=cl(e.timestampValue),r=cl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return dl(e.bytesValue).isEqual(dl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return hl(e.geoPointValue.latitude)===hl(t.geoPointValue.latitude)&&hl(e.geoPointValue.longitude)===hl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return hl(e.integerValue)===hl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=hl(e.doubleValue),r=hl(t.doubleValue);return n===r?ba(n)===ba(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zo(e.arrayValue.values||[],t.arrayValue.values||[],_l);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xa(n)!==Xa(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!_l(n[i],r[i])))return!1;return!0}(e,t);default:return So()}}function Sl(e,t){return void 0!==(e.values||[]).find((e=>_l(e,t)))}function El(e,t){if(e===t)return 0;const n=bl(e),r=bl(t);if(n!==r)return Vo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=hl(e.integerValue||e.doubleValue),r=hl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Il(e.timestampValue,t.timestampValue);case 4:return Il(ml(e),ml(t));case 5:return Vo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=dl(e),r=dl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Vo(n[i],r[i]);if(0!==e)return e}return Vo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Vo(hl(e.latitude),hl(t.latitude));return 0!==n?n:Vo(hl(e.longitude),hl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=El(n[i],r[i]);if(e)return e}return Vo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===vl.mapValue&&t===vl.mapValue)return 0;if(e===vl.mapValue)return 1;if(t===vl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Vo(r[o],s[o]);if(0!==e)return e;const t=El(n[r[o]],i[s[o]]);if(0!==t)return t}return Vo(r.length,s.length)}(e.mapValue,t.mapValue);default:throw So()}}function Il(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vo(e,t);const n=cl(e),r=cl(t),i=Vo(n.seconds,r.seconds);return 0!==i?i:Vo(n.nanos,r.nanos)}function xl(e){return kl(e)}function kl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=cl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return dl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ho.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=kl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(kl(e.fields[i]));return n+"}"}(e.mapValue):So()}function Tl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Cl(e){return!!e&&"integerValue"in e}function Nl(e){return!!e&&"arrayValue"in e}function Dl(e){return!!e&&"nullValue"in e}function Al(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pl(e){return!!e&&"mapValue"in e}function Ll(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ja(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ll(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ll(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Rl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ol(e){return"nullValue"in e?wl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Tl(yl.empty(),Ho.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:So()}function Ml(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Tl(yl.empty(),Ho.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?vl:So()}function Fl(e,t){const n=El(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Vl(e,t){const n=El(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class zl{constructor(e){this.value=e}static empty(){return new zl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Pl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=Qo.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ll(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Pl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _l(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Pl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ja(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new zl(Ll(this.value))}}function Ul(e){const t=[];return Ja(e.fields,((e,n)=>{const r=new Qo([e]);if(Pl(n)){const e=Ul(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ol(t)}class jl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new jl(e,0,Bo.min(),Bo.min(),Bo.min(),zl.empty(),0)}static newFoundDocument(e,t,n,r){return new jl(e,1,t,Bo.min(),n,r,0)}static newNoDocument(e,t){return new jl(e,2,t,Bo.min(),Bo.min(),zl.empty(),0)}static newUnknownDocument(e,t){return new jl(e,3,t,Bo.min(),Bo.min(),zl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Bl{constructor(e,t){this.position=e,this.inclusive=t}}function ql(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ho.comparator(Ho.fromName(o.referenceValue),n.key):El(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Kl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!_l(e.position[n],t.position[n]))return!1;return!0}class Gl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ql(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hl{}class Wl extends Hl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new iu(e,t,n):"array-contains"===t?new lu(e,n):"in"===t?new uu(e,n):"not-in"===t?new cu(e,n):"array-contains-any"===t?new hu(e,n):new Wl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new su(e,n):new ou(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(El(t,this.value)):null!==t&&bl(this.value)===bl(t)&&this.matchesComparison(El(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return So()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yl extends Hl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Yl(e,t)}matches(e){return $l(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function $l(e){return"and"===e.op}function Xl(e){return"or"===e.op}function Jl(e){return Zl(e)&&$l(e)}function Zl(e){for(const t of e.filters)if(t instanceof Yl)return!1;return!0}function eu(e){if(e instanceof Wl)return e.field.canonicalString()+e.op.toString()+xl(e.value);if(Jl(e))return e.filters.map((e=>eu(e))).join(",");{const t=e.filters.map((e=>eu(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function tu(e,t){return e instanceof Wl?function(e,t){return t instanceof Wl&&e.op===t.op&&e.field.isEqual(t.field)&&_l(e.value,t.value)}(e,t):e instanceof Yl?function(e,t){return t instanceof Yl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&tu(n,t.filters[r])),!0)}(e,t):void So()}function nu(e,t){const n=e.filters.concat(t);return Yl.create(n,e.op)}function ru(e){return e instanceof Wl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xl(e.value))}(e):e instanceof Yl?function(e){return e.op.toString()+" {"+e.getFilters().map(ru).join(" ,")+"}"}(e):"Filter"}class iu extends Wl{constructor(e,t,n){super(e,t,n),this.key=Ho.fromName(n.referenceValue)}matches(e){const t=Ho.comparator(e.key,this.key);return this.matchesComparison(t)}}class su extends Wl{constructor(e,t){super(e,"in",t),this.keys=au("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ou extends Wl{constructor(e,t){super(e,"not-in",t),this.keys=au("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function au(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ho.fromName(e.referenceValue)))}class lu extends Wl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nl(t)&&Sl(t.arrayValue,this.value)}}class uu extends Wl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sl(this.value.arrayValue,t)}}class cu extends Wl{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sl(this.value.arrayValue,t)}}class hu extends Wl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Sl(this.value.arrayValue,e)))}}class du{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function fu(e){return new du(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function pu(e){const t=Io(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>eu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),wa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>xl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>xl(e))).join(",")),t.ce=e}return t.ce}function mu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ql(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!tu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kl(e.startAt,t.startAt)&&Kl(e.endAt,t.endAt)}function gu(e){return Ho.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function yu(e,t){return e.filters.filter((e=>e instanceof Wl&&e.field.isEqual(t)))}function vu(e,t,n){let r=wl,i=!0;for(const s of yu(e,t)){let e=wl,t=!0;switch(s.op){case"<":case"<=":e=Ol(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=wl}Fl({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Fl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function wu(e,t,n){let r=vl,i=!0;for(const s of yu(e,t)){let e=vl,t=!0;switch(s.op){case">=":case">":e=Ml(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=vl}Vl({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Vl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function _u(e,t,n,r,i,s,o,a){return new bu(e,t,n,r,i,s,o,a)}function Su(e){return new bu(e)}function Eu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Iu(e){return null!==e.collectionGroup}function xu(e){const t=Io(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new rl(Qo.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Gl(r,n))})),e.has(Qo.keyField().canonicalString())||t.le.push(new Gl(Qo.keyField(),n))}return t.le}function ku(e){const t=Io(e);return t.he||(t.he=Tu(t,xu(e))),t.he}function Tu(e,t){if("F"===e.limitType)return fu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Gl(e.field,t)}));const n=e.endAt?new Bl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Bl(e.startAt.position,e.startAt.inclusive):null;return fu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Cu(e,t){const n=e.filters.concat([t]);return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nu(e,t,n){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Du(e,t){return mu(ku(e),ku(t))&&e.limitType===t.limitType}function Au(e){return"".concat(pu(ku(e)),"|lt:").concat(e.limitType)}function Pu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ru(e))).join(", "),"]")),wa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>xl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>xl(e))).join(",")),"Target(".concat(t,")")}(ku(e)),"; limitType=").concat(e.limitType,")")}function Lu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ho.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of xu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ql(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xu(e),t))&&!(e.endAt&&!function(e,t,n){const r=ql(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xu(e),t))}(e,t)}function Ru(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ou(e){return(t,n)=>{let r=!1;for(const i of xu(e)){const e=Mu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Mu(e,t,n){const r=e.field.isKeyField()?Ho.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?El(r,i):So()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return So()}}class Fu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ja(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Za(this.inner)}size(){return this.innerSize}}const Vu=new el(Ho.comparator);function zu(){return Vu}const Uu=new el(Ho.comparator);function ju(){let e=Uu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Bu(e){let t=Uu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function qu(){return Gu()}function Ku(){return Gu()}function Gu(){return new Fu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Qu=new el(Ho.comparator),Hu=new rl(Ho.comparator);function Wu(){let e=Hu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Yu=new rl(Vo);function $u(){return Yu}function Xu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ba(t)?"-0":t}}function Ju(e){return{integerValue:""+e}}function Zu(e,t){return _a(t)?Ju(t):Xu(e,t)}class ec{constructor(){this._=void 0}}function tc(e,t,n){return e instanceof ic?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&fl(t)&&(t=pl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof sc?oc(e,t):e instanceof ac?lc(e,t):function(e,t){const n=rc(e,t),r=cc(n)+cc(e.Ie);return Cl(n)&&Cl(e.Ie)?Ju(r):Xu(e.serializer,r)}(e,t)}function nc(e,t,n){return e instanceof sc?oc(e,t):e instanceof ac?lc(e,t):n}function rc(e,t){return e instanceof uc?function(e){return Cl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ic extends ec{}class sc extends ec{constructor(e){super(),this.elements=e}}function oc(e,t){const n=hc(t);for(const r of e.elements)n.some((e=>_l(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ac extends ec{constructor(e){super(),this.elements=e}}function lc(e,t){let n=hc(t);for(const r of e.elements)n=n.filter((e=>!_l(e,r)));return{arrayValue:{values:n}}}class uc extends ec{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function cc(e){return hl(e.integerValue||e.doubleValue)}function hc(e){return Nl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class dc{constructor(e,t){this.field=e,this.transform=t}}class fc{constructor(e,t){this.version=e,this.transformResults=t}}class pc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pc}static exists(e){return new pc(void 0,e)}static updateTime(e){return new pc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gc{}function yc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tc(e.key,pc.none()):new Sc(e.key,e.data,pc.none());{const n=e.data,r=zl.empty();let i=new rl(Qo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ec(e.key,r,new ol(i.toArray()),pc.none())}}function vc(e,t,n){e instanceof Sc?function(e,t,n){const r=e.value.clone(),i=xc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ec?function(e,t,n){if(!mc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=xc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ic(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function wc(e,t,n,r){return e instanceof Sc?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=e.value.clone(),s=kc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ec?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=kc(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ic(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return mc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=rc(r.transform,e||null);null!=i&&(null===n&&(n=zl.empty()),n.set(r.field,i))}return n||null}function _c(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zo(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof sc&&t instanceof sc||e instanceof ac&&t instanceof ac?zo(e.elements,t.elements,_l):e instanceof uc&&t instanceof uc?_l(e.Ie,t.Ie):e instanceof ic&&t instanceof ic}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Sc extends gc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ec extends gc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ic(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function xc(e,t,n){const r=new Map;Eo(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,nc(o,a,n[i]))}return r}function kc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,tc(e,s,t))}return r}class Tc extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cc extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&vc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=wc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=wc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ku();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=yc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Bo.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Wu())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((e,t)=>_c(e,t)))&&zo(this.baseMutations,e.baseMutations,((e,t)=>_c(e,t)))}}class Dc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Eo(e.mutations.length===n.length);let r=Qu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Dc(e,t,n,r)}}class Ac{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Pc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lc,Rc;function Oc(e){switch(e){default:return So();case xo.CANCELLED:case xo.UNKNOWN:case xo.DEADLINE_EXCEEDED:case xo.RESOURCE_EXHAUSTED:case xo.INTERNAL:case xo.UNAVAILABLE:case xo.UNAUTHENTICATED:return!1;case xo.INVALID_ARGUMENT:case xo.NOT_FOUND:case xo.ALREADY_EXISTS:case xo.PERMISSION_DENIED:case xo.FAILED_PRECONDITION:case xo.ABORTED:case xo.OUT_OF_RANGE:case xo.UNIMPLEMENTED:case xo.DATA_LOSS:return!0}}function Mc(e){if(void 0===e)return wo("GRPC error has no .code"),xo.UNKNOWN;switch(e){case Lc.OK:return xo.OK;case Lc.CANCELLED:return xo.CANCELLED;case Lc.UNKNOWN:return xo.UNKNOWN;case Lc.DEADLINE_EXCEEDED:return xo.DEADLINE_EXCEEDED;case Lc.RESOURCE_EXHAUSTED:return xo.RESOURCE_EXHAUSTED;case Lc.INTERNAL:return xo.INTERNAL;case Lc.UNAVAILABLE:return xo.UNAVAILABLE;case Lc.UNAUTHENTICATED:return xo.UNAUTHENTICATED;case Lc.INVALID_ARGUMENT:return xo.INVALID_ARGUMENT;case Lc.NOT_FOUND:return xo.NOT_FOUND;case Lc.ALREADY_EXISTS:return xo.ALREADY_EXISTS;case Lc.PERMISSION_DENIED:return xo.PERMISSION_DENIED;case Lc.FAILED_PRECONDITION:return xo.FAILED_PRECONDITION;case Lc.ABORTED:return xo.ABORTED;case Lc.OUT_OF_RANGE:return xo.OUT_OF_RANGE;case Lc.UNIMPLEMENTED:return xo.UNIMPLEMENTED;case Lc.DATA_LOSS:return xo.DATA_LOSS;default:return So()}}(Rc=Lc||(Lc={}))[Rc.OK=0]="OK",Rc[Rc.CANCELLED=1]="CANCELLED",Rc[Rc.UNKNOWN=2]="UNKNOWN",Rc[Rc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rc[Rc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rc[Rc.NOT_FOUND=5]="NOT_FOUND",Rc[Rc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rc[Rc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rc[Rc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rc[Rc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rc[Rc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rc[Rc.ABORTED=10]="ABORTED",Rc[Rc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rc[Rc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rc[Rc.INTERNAL=13]="INTERNAL",Rc[Rc.UNAVAILABLE=14]="UNAVAILABLE",Rc[Rc.DATA_LOSS=15]="DATA_LOSS";let Fc=null;function Vc(){return new TextEncoder}const zc=new ho([4294967295,4294967295],0);function Uc(e){const t=Vc().encode(e),n=new co;return n.update(t),new Uint8Array(n.digest())}function jc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ho([n,r],0),new ho([i,s],0)]}class Bc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qc("Invalid padding: ".concat(t));if(n<0)throw new qc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new qc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new qc("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=ho.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(ho.fromNumber(n)));return 1===r.compare(zc)&&(r=new ho([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Uc(e),[n,r]=jc(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Bc(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Uc(e),[n,r]=jc(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Kc(Bo.min(),r,new el(Vo),zu(),Wu())}}class Gc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Gc(n,t,Wu(),Wu(),Wu())}}class Qc{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Hc{constructor(e,t){this.targetId=e,this.fe=t}}class Wc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ll.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Yc{constructor(){this.ge=0,this.pe=Jc(),this.ye=ll.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Wu(),t=Wu(),n=Wu();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:So()}})),new Gc(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Jc()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Eo(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class $c{constructor(e){this.Le=e,this.ke=new Map,this.qe=zu(),this.Qe=Xc(),this.Ke=new el(Vo)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:So()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(gu(i))if(0===n){const e=new Ho(i.path);this.We(t,e,jl.newNoDocument(e,Bo.min()))}else Eo(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Fc||Fc.tt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=dl(n).toUint8Array()}catch(e){if(e instanceof al)return bo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Bc(s,r,i)}catch(e){return bo(e instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&gu(i.target)){const t=new Ho(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,jl.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Wu();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Kc(e,t,this.Ke,this.qe,n);return this.qe=zu(),this.Qe=Xc(),this.Ke=new el(Vo),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Yc,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new rl(Vo),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||vo("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Yc),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xc(){return new el(Ho.comparator)}function Jc(){return new el(Ho.comparator)}const Zc={asc:"ASCENDING",desc:"DESCENDING"},eh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},th={and:"AND",or:"OR"};class nh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rh(e,t){return e.useProto3Json||wa(t)?t:{value:t}}function ih(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function sh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function oh(e,t){return ih(e,t.toTimestamp())}function ah(e){return Eo(!!e),Bo.fromTimestamp(function(e){const t=cl(e);return new jo(t.seconds,t.nanos)}(e))}function lh(e,t){return uh(e,t).canonicalString()}function uh(e,t){const n=function(e){return new Ko(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ch(e){const t=Ko.fromString(e);return Eo(Ph(t)),t}function hh(e,t){return lh(e.databaseId,t.path)}function dh(e,t){const n=ch(t);if(n.get(1)!==e.databaseId.projectId)throw new ko(xo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ko(xo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ho(gh(n))}function fh(e,t){return lh(e.databaseId,t)}function ph(e){const t=ch(e);return 4===t.length?Ko.emptyPath():gh(t)}function mh(e){return new Ko(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gh(e){return Eo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function yh(e,t,n){return{name:hh(e,t),fields:n.value.mapValue.fields}}function vh(e,t,n){const r=dh(e,t.name),i=ah(t.updateTime),s=t.createTime?ah(t.createTime):Bo.min(),o=new zl({mapValue:{fields:t.fields}}),a=jl.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function wh(e,t){let n;if(t instanceof Sc)n={update:yh(e,t.key,t.value)};else if(t instanceof Tc)n={delete:hh(e,t.key)};else if(t instanceof Ec)n={update:yh(e,t.key,t.data),updateMask:Ah(t.fieldMask)};else{if(!(t instanceof Cc))return So();n={verify:hh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ic)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof sc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ac)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof uc)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw So()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:oh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:So()}(e,t.precondition)),n}function bh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?pc.updateTime(ah(e.updateTime)):void 0!==e.exists?pc.exists(e.exists):pc.none()}(t.currentDocument):pc.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Eo("REQUEST_TIME"===t.setToServerValue),n=new ic;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new sc(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new ac(e)}else"increment"in t?n=new uc(e,t.increment):So();const r=Qo.fromServerFormat(t.fieldPath);return new dc(r,n)}(e,t))):[];if(t.update){t.update.name;const i=dh(e,t.update.name),s=new zl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ol(t.map((e=>Qo.fromServerFormat(e))))}(t.updateMask);return new Ec(i,s,e,n,r)}return new Sc(i,s,n,r)}if(t.delete){const r=dh(e,t.delete);return new Tc(r,n)}if(t.verify){const r=dh(e,t.verify);return new Cc(r,n)}return So()}function _h(e,t){return{documents:[fh(e,t.path)]}}function Sh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fh(e,i);const s=function(e){if(0!==e.length)return Dh(Yl.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ch(e.field),direction:xh(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=rh(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Eh(e){let t=ph(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Eo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ih(e);return t instanceof Yl&&Jl(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Gl(Nh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,wa(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Bl(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Bl(n,t)}(n.endAt)),_u(t,i,o,s,a,"F",l,u)}function Ih(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Nh(e.unaryFilter.field);return Wl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Nh(e.unaryFilter.field);return Wl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nh(e.unaryFilter.field);return Wl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nh(e.unaryFilter.field);return Wl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return So()}}(e):void 0!==e.fieldFilter?function(e){return Wl.create(Nh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return So()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Yl.create(e.compositeFilter.filters.map((e=>Ih(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return So()}}(e.compositeFilter.op))}(e):So()}function xh(e){return Zc[e]}function kh(e){return eh[e]}function Th(e){return th[e]}function Ch(e){return{fieldPath:e.canonicalString()}}function Nh(e){return Qo.fromServerFormat(e.fieldPath)}function Dh(e){return e instanceof Wl?function(e){if("=="===e.op){if(Al(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NAN"}};if(Dl(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Al(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NOT_NAN"}};if(Dl(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ch(e.field),op:kh(e.op),value:e.value}}}(e):e instanceof Yl?function(e){const t=e.getFilters().map((e=>Dh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Th(e.op),filters:t}}}(e):So()}function Ah(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ph(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Lh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bo.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Bo.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ll.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Lh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Lh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Rh{constructor(e){this.ct=e}}function Oh(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Mh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:hh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ih(e,t.version.toTimestamp()),createTime:ih(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fh(t.version)};else{if(!t.isUnknownDocument())return So();r.unknownDocument={path:n.path.toArray(),version:Fh(t.version)}}return r}function Mh(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fh(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Vh(e){const t=new jo(e.seconds,e.nanoseconds);return Bo.fromTimestamp(t)}function zh(e,t){const n=(t.baseMutations||[]).map((t=>bh(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>bh(e.ct,t))),i=jo.fromMillis(t.localWriteTimeMs);return new Nc(t.batchId,i,n,r)}function Uh(e){const t=Vh(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Vh(e.lastLimboFreeSnapshotVersion):Bo.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Eo(1===e.documents.length),ku(Su(ph(e.documents[0])))}(e.query):function(e){return ku(Eh(e))}(e.query),new Lh(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ll.fromBase64String(e.resumeToken))}function jh(e,t){const n=Fh(t.snapshotVersion),r=Fh(t.lastLimboFreeSnapshotVersion);let i;i=gu(t.target)?_h(e.ct,t.target):Sh(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:pu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Bh(e){const t=Eh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nu(t,t.limit,"L"):t}function qh(e,t){return new Ac(t.largestBatchId,bh(e.ct,t.overlayMutation))}function Kh(e,t){const n=t.path.lastSegment();return[e,Sa(t.path.popLast()),n]}function Gh(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Fh(r.readTime),documentKey:Sa(r.documentKey.path),largestBatchId:r.largestBatchId}}class Qh{getBundleMetadata(e,t){return Hh(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Vh(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Hh(e).put(function(e){return{bundleId:e.id,createTime:Fh(ah(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Wh(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Bh(e.bundledQuery),readTime:Vh(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Wh(e).put(function(e){return{name:e.name,readTime:Fh(ah(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Hh(e){return $a(e,"bundles")}function Wh(e){return $a(e,"namedQueries")}class Yh{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Yh(e,n)}getOverlay(e,t){return $h(e).get(Kh(this.userId,t)).next((e=>e?qh(this.serializer,e):null))}getOverlays(e,t){const n=qu();return oa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Ac(t,i);r.push(this.ht(e,s))})),oa.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Sa(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push($h(e).H("collectionPathOverlayIndex",r))})),oa.waitFor(i)}getOverlaysForCollection(e,t,n){const r=qu(),i=Sa(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return $h(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=qh(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=qu();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $h(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=qh(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return $h(e).put(function(e,t,n){const[r,i,s]=Kh(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:wh(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function $h(e){return $a(e,"documentOverlays")}class Xh{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(hl(e.integerValue));else if("doubleValue"in e){const n=hl(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),ba(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(dl(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Rl(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):So()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Ho.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Jh(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Zh(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Jh(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xh.bt=new Xh;class ed{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=Zh(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=Zh(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class td{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class nd{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class rd{constructor(){this.Gt=new ed,this.zt=new td(this.Gt),this.jt=new nd(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class id{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new id(this.indexId,this.documentKey,this.arrayValue,n)}}function sd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=od(e.arrayValue,t.arrayValue),0!==n?n:(n=od(e.directionalValue,t.directionalValue),0!==n?n:Ho.comparator(e.documentKey,t.documentKey)))}function od(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class ad{constructor(e){this.Yt=new rl(((e,t)=>Qo.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Eo(e.collectionGroup===this.collectionId),this.en)return!1;const t=Yo(e);if(void 0!==t&&!this.nn(t))return!1;const n=$o(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new rl(Qo.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Xo(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Xo(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Xo(n.field,"asc"===n.dir?0:1)));return new Wo(Wo.UNKNOWN_ID,this.collectionId,t,Jo.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ld(e){var t,n;if(Eo(e instanceof Wl||e instanceof Yl),e instanceof Wl){if(e instanceof uu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Wl.create(e.field,"==",t))))||[];return Yl.create(r,"or")}return e}const r=e.filters.map((e=>ld(e)));return Yl.create(r,e.op)}function ud(e){if(0===e.getFilters().length)return[];const t=fd(ld(e));return Eo(dd(t)),cd(t)||hd(t)?[t]:t.getFilters()}function cd(e){return e instanceof Wl}function hd(e){return e instanceof Yl&&Jl(e)}function dd(e){return cd(e)||hd(e)||function(e){if(e instanceof Yl&&Xl(e)){for(const t of e.getFilters())if(!cd(t)&&!hd(t))return!1;return!0}return!1}(e)}function fd(e){if(Eo(e instanceof Wl||e instanceof Yl),e instanceof Wl)return e;if(1===e.filters.length)return fd(e.filters[0]);const t=e.filters.map((e=>fd(e)));let n=Yl.create(t,e.op);return n=gd(n),dd(n)?n:(Eo(n instanceof Yl),Eo($l(n)),Eo(n.filters.length>1),n.filters.reduce(((e,t)=>pd(e,t))))}function pd(e,t){let n;return Eo(e instanceof Wl||e instanceof Yl),Eo(t instanceof Wl||t instanceof Yl),n=e instanceof Wl?t instanceof Wl?function(e,t){return Yl.create([e,t],"and")}(e,t):md(e,t):t instanceof Wl?md(t,e):function(e,t){if(Eo(e.filters.length>0&&t.filters.length>0),$l(e)&&$l(t))return nu(e,t.getFilters());const n=Xl(e)?e:t,r=Xl(e)?t:e,i=n.filters.map((e=>pd(e,r)));return Yl.create(i,"or")}(e,t),gd(n)}function md(e,t){if($l(t))return nu(t,e.getFilters());{const n=t.filters.map((t=>pd(e,t)));return Yl.create(n,"or")}}function gd(e){if(Eo(e instanceof Wl||e instanceof Yl),e instanceof Wl)return e;const t=e.getFilters();if(1===t.length)return gd(t[0]);if(Zl(e))return e;const n=t.map((e=>gd(e))),r=[];return n.forEach((t=>{t instanceof Wl?r.push(t):t instanceof Yl&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Yl.create(r,e.op)}class yd{constructor(){this._n=new vd}addToCollectionParentIndex(e,t){return this._n.add(t),oa.resolve()}getCollectionParents(e,t){return oa.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return oa.resolve()}deleteFieldIndex(e,t){return oa.resolve()}deleteAllFieldIndexes(e){return oa.resolve()}createTargetIndexes(e,t){return oa.resolve()}getDocumentsMatchingTarget(e,t){return oa.resolve(null)}getIndexType(e,t){return oa.resolve(0)}getFieldIndexes(e,t){return oa.resolve([])}getNextCollectionGroupToUpdate(e){return oa.resolve(null)}getMinOffset(e,t){return oa.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return oa.resolve(ta.min())}updateCollectionGroup(e,t,n){return oa.resolve()}updateIndexEntries(e,t){return oa.resolve()}}class vd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rl(Ko.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new rl(Ko.comparator)).toArray()}}const wd=new Uint8Array(0);class bd{constructor(e,t){this.databaseId=t,this.an=new vd,this.un=new Fu((e=>pu(e)),((e,t)=>mu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Sa(r)};return _d(e).put(i)}return oa.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Uo(t),""],!1,!0);return _d(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(xa(r.parent))}return n}))}addFieldIndex(e,t){const n=Ed(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Id(e);return i.next((e=>{n.put(Gh(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Ed(e),r=Id(e),i=Sd(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ed(e),n=Sd(e),r=Id(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return oa.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new ad(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Sd(e);let r=!0;const i=new Map;return oa.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Wu();const r=[];return oa.forEach(i,((i,s)=>{vo("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(pu(t)));const o=function(e,t){const n=Yo(t);if(void 0===n)return null;for(const r of yu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of $o(t))for(const t of yu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of $o(t)){const t=0===i.kind?vu(e,i.fieldPath,e.startAt):wu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Bl(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of $o(t)){const t=0===i.kind?wu(e,i.fieldPath,e.endAt):vu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Bl(n,r)}(s,i),c=this.hn(i,s,l),h=this.hn(i,s,u),d=this.Pn(i,s,a),f=this.In(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return oa.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Ho.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return oa.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:ud(Yl.create(e.filters,"and")).map((t=>fu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Tn(t[c/l]):wd,h=this.En(e,a,n[c%l],r),d=this.dn(e,a,i[c%l],s),f=o.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new id(e,Ho.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new id(e,Ho.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new ad(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return oa.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new rl(Qo.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new rd;for(const r of $o(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Xh.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new rd;return Xh.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new rd;return Xh.bt.Pt(Tl(this.databaseId,t),n.Ht(function(e){const t=$o(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new rd);let i=0;for(const s of $o(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Nl(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Xh.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new rd;n.seed(e.Wt()),Xh.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Wl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Ed(e),r=Id(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return oa.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Jo(t.sequenceNumber,new ta(Vh(t.readTime),new Ho(xa(t.documentKey)),t.largestBatchId)):Jo.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Xo(Qo.fromServerFormat(t),n)}));return new Wo(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Vo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Ed(e),i=Id(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>oa.forEach(t,(t=>i.put(Gh(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return oa.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?oa.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),oa.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?oa.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Sd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Sd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Sd(e);let i=new rl(sd);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new id(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new rl(sd);const r=this.An(t,e);if(null==r)return n;const i=Yo(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Nl(s))for(const i of s.arrayValue.values||[])n=n.add(new id(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new id(t.indexId,e.key,wd,r));return n}wn(e,t,n,r,i){vo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=sl(s),l=sl(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=sl(o)):t?(i(a),a=sl(s)):(a=sl(s),l=sl(o))}}(r,i,sd,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),oa.waitFor(s)}gn(e){let t=1;return Id(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>sd(e,t))).filter(((e,t,n)=>!t||0!==sd(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=sd(s,e),i=sd(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,wd,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,wd,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return sd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xd)}getMinOffset(e,t){return oa.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||So())))).next(xd)}}function _d(e){return $a(e,"collectionParents")}function Sd(e){return $a(e,"indexEntries")}function Ed(e){return $a(e,"indexConfiguration")}function Id(e){return $a(e,"indexState")}function xd(e){Eo(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;na(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ta(t.readTime,t.documentKey,n)}const kd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Td{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Td(e,Td.DEFAULT_COLLECTION_PERCENTILE,Td.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Cd(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Eo(1===a)})));const u=[];for(const c of n.mutations){const e=Ca(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return oa.waitFor(s).next((()=>u))}function Nd(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw So();t=e.noDocument}return JSON.stringify(t).length}Td.DEFAULT_COLLECTION_PERCENTILE=10,Td.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Td.DEFAULT=new Td(41943040,Td.DEFAULT_COLLECTION_PERCENTILE,Td.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Td.DISABLED=new Td(-1,0,0);class Dd{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Eo(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Dd(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pd(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Ld(e),s=Pd(e);return s.add({}).next((o=>{Eo("number"==typeof o);const a=new Nc(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>wh(e.ct,t))),i=n.mutations.map((t=>wh(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new rl(((e,t)=>Vo(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ca(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,Na))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),oa.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Pd(e).get(t).next((e=>e?(Eo(e.userId===this.userId),zh(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?oa.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Pd(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Eo(t.batchId>=n),i=zh(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Pd(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pd(e).W("userMutationsIndex",t).next((e=>e.map((e=>zh(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ta(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Ld(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,u=xa(a);if(o===this.userId&&t.path.isEqual(u))return Pd(e).get(l).next((e=>{if(!e)throw So();Eo(e.userId===this.userId),i.push(zh(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rl(Vo);const r=[];return t.forEach((t=>{const i=Ta(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Ld(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=xa(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),oa.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ta(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new rl(Vo);return Ld(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,u=xa(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Pd(e).get(t).next((e=>{if(null===e)throw So();Eo(e.userId===this.userId),n.push(zh(this.serializer,e))})))})),oa.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Cd(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),oa.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return oa.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Ld(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=xa(e[1]);r.push(t)}else n.done()})).next((()=>{Eo(0===r.length)}))}))}containsKey(e,t){return Ad(e,this.userId,t)}xn(e){return Rd(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Ad(e,t,n){const r=Ta(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ld(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Pd(e){return $a(e,"mutations")}function Ld(e){return $a(e,"documentMutations")}function Rd(e){return $a(e,"mutationQueues")}class Od{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Od(0)}static Bn(){return new Od(-1)}}class Md{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Od(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Bo.fromTimestamp(new jo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Fd(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Eo(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Fd(e).Y(((s,o)=>{const a=Uh(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>oa.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Fd(e).Y(((e,n)=>{const r=Uh(n);t(r)}))}Ln(e){return Vd(e).get("targetGlobalKey").next((e=>(Eo(null!==e),e)))}kn(e,t){return Vd(e).put("targetGlobalKey",t)}qn(e,t){return Fd(e).put(jh(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=pu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Fd(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Uh(n);mu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=zd(e);return t.forEach((t=>{const s=Sa(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),oa.waitFor(r)}removeMatchingKeys(e,t,n){const r=zd(e);return oa.forEach(t,(t=>{const i=Sa(t.path);return oa.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=zd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=zd(e);let i=Wu();return r.Y({range:n,J:!0},((e,t,n)=>{const r=xa(e[1]),s=new Ho(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Sa(t.path),r=IDBKeyRange.bound([n],[Uo(n)],!1,!0);let i=0;return zd(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Fd(e).get(t).next((e=>e?Uh(e):null))}}function Fd(e){return $a(e,"targets")}function Vd(e){return $a(e,"targetGlobal")}function zd(e){return $a(e,"targetDocuments")}function Ud(e,t){let[n,r]=e,[i,s]=t;const o=Vo(n,i);return 0===o?Vo(r,s):o}class jd{constructor(e){this.Kn=e,this.buffer=new rl(Ud),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ud(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){vo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ha(e)?vo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await sa(e)}await this.zn(3e5)}))}}class qd{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return oa.resolve(va._e);const n=new jd(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(vo("LruGarbageCollector","Garbage collection skipped; disabled"),oa.resolve(kd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(vo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),kd):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(vo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),yo()<=Me.DEBUG&&vo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),oa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Kd(e,t){return new qd(e,t)}class Gd{constructor(e,t){this.db=e,this.garbageCollector=Kd(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Qd(e,n)}removeReference(e,t,n){return Qd(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Qd(e,t)}er(e,t){return function(e,t){let n=!1;return Rd(e).Z((r=>Ad(e,r,t).next((e=>(e&&(n=!0),oa.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Bo.min()),zd(e).delete(function(e){return[0,Sa(e.path)]}(s)))))}));r.push(t)}})).next((()=>oa.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Qd(e,t)}Xn(e,t){const n=zd(e);let r,i=va._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==va._e&&t(new Ho(xa(r)),i),i=l,r=a):i=va._e})).next((()=>{i!==va._e&&t(new Ho(xa(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qd(e,t){return zd(e).put(function(e,t){return{targetId:0,path:Sa(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Hd{constructor(){this.changes=new Fu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?oa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wd{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Jd(e).put(n)}removeEntry(e,t,n){return Jd(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Mh(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=jl.newInvalidDocument(t);return Jd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zd(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:jl.newInvalidDocument(t)};return Jd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zd(t))},((e,r)=>{n={document:this.nr(t,r),size:Nd(r)}})).next((()=>n))}getEntries(e,t){let n=zu();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=zu(),r=new el(Ho.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Nd(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return oa.resolve();let r=new rl(tf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Zd(r.first()),Zd(r.last())),s=r.getIterator();let o=s.getNext();return Jd(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ho.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&tf(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(Zd(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Mh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jd(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=zu();for(const i of e){const e=this.nr(Ho.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Lu(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=zu();const s=ef(t,n),o=ef(t,ta.max());return Jd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(Ho.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new $d(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Xd(e).get("remoteDocumentGlobalKey").next((e=>(Eo(!!e),e)))}tr(e,t){return Xd(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=vh(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ho.fromSegments(t.noDocument.path),r=Vh(t.noDocument.readTime);n=jl.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return So();{const e=Ho.fromSegments(t.unknownDocument.path),r=Vh(t.unknownDocument.version);n=jl.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new jo(e[0],e[1]);return Bo.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Bo.min()))return e}return jl.newInvalidDocument(e)}}function Yd(e){return new Wd(e)}class $d extends Hd{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Fu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new rl(((e,t)=>Vo(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Oh(this.ar.serializer,s);r=r.add(i.path.popLast());const l=Nd(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Oh(this.ar.serializer,s.convertToNoDocument(Bo.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),oa.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Xd(e){return $a(e,"remoteDocumentGlobal")}function Jd(e){return $a(e,"remoteDocumentsV14")}function Zd(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ef(e,t){const n=t.documentKey.path.toArray();return[e,Mh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Vo(n[s],r[s]),i)return i;return i=Vo(n.length,r.length),i||(i=Vo(n[n.length-2],r[r.length-2]),i||Vo(n[n.length-1],r[r.length-1]))}class nf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&wc(n.mutation,e,ol.empty(),jo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Wu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wu();const r=qu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ju();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=qu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Wu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=zu();const s=Gu(),o=Gu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ec)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),wc(o.mutation,t,o.mutation.getFieldMask(),jo.now())):s.set(t.key,ol.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new nf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Gu();let r=new el(((e,t)=>e-t)),i=Wu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ol.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Wu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Ku();l.forEach((e=>{if(!i.has(e)){const r=yc(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return oa.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ho.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Iu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):oa.resolve(qu());let o=-1,a=i;return s.next((t=>oa.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?oa.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Wu()))).next((e=>({batchId:o,changes:Bu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ho(t)).next((e=>{let t=ju();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ju();return this.indexManager.getCollectionParents(e,i).next((o=>oa.forEach(o,(o=>{const a=function(e,t){return new bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,jl.newInvalidDocument(r)))}));let n=ju();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&wc(s.mutation,r,ol.empty(),jo.now()),Lu(t,r)&&(n=n.insert(e,r))})),n}))}}class sf{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return oa.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ah(e.createTime)}}(t)),oa.resolve()}getNamedQuery(e,t){return oa.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Bh(e.bundledQuery),readTime:ah(e.readTime)}}(t)),oa.resolve()}}class of{constructor(){this.overlays=new el(Ho.comparator),this.hr=new Map}getOverlay(e,t){return oa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=qu();return oa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),oa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),oa.resolve()}getOverlaysForCollection(e,t,n){const r=qu(),i=t.length+1,s=new Ho(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return oa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new el(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=qu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=qu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return oa.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ac(t,n));let i=this.hr.get(t);void 0===i&&(i=Wu(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class af{constructor(){this.Pr=new rl(lf.Ir),this.Tr=new rl(lf.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new lf(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new lf(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Ho(new Ko([])),n=new lf(t,e),r=new lf(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Ho(new Ko([])),n=new lf(t,e),r=new lf(t,e+1);let i=Wu();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new lf(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class lf{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Ho.comparator(e.key,t.key)||Vo(e.pr,t.pr)}static Er(e,t){return Vo(e.pr,t.pr)||Ho.comparator(e.key,t.key)}}class uf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new rl(lf.Ir)}checkEmpty(e){return oa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Nc(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new lf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return oa.resolve(s)}lookupMutationBatch(e,t){return oa.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return oa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return oa.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return oa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new lf(t,0),r=new lf(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),oa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rl(Vo);return t.forEach((e=>{const t=new lf(e,0),r=new lf(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),oa.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ho.isDocumentKey(i)||(i=i.child(""));const s=new lf(new Ho(i),0);let o=new rl(Vo);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),oa.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Eo(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return oa.forEach(t.mutations,(r=>{const i=new lf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new lf(t,0),r=this.wr.firstAfterOrEqual(n);return oa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oa.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cf{constructor(e){this.vr=e,this.docs=new el(Ho.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return oa.resolve(n?n.document.mutableCopy():jl.newInvalidDocument(t))}getEntries(e,t){let n=zu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():jl.newInvalidDocument(e))})),oa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=zu();const s=t.path,o=new Ho(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||na(ea(o),n)<=0||(r.has(o.key)||Lu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return oa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){So()}Fr(e,t){return oa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new hf(this)}getSize(e){return oa.resolve(this.size)}}class hf extends Hd{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),oa.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class df{constructor(e){this.persistence=e,this.Mr=new Fu((e=>pu(e)),mu),this.lastRemoteSnapshotVersion=Bo.min(),this.highestTargetId=0,this.Or=0,this.Nr=new af,this.targetCount=0,this.Br=Od.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),oa.resolve()}getLastRemoteSnapshotVersion(e){return oa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oa.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),oa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),oa.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Od(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,oa.resolve()}updateTargetData(e,t){return this.qn(t),oa.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,oa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),oa.waitFor(i).next((()=>r))}getTargetCount(e){return oa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return oa.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),oa.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),oa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),oa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return oa.resolve(n)}containsKey(e,t){return oa.resolve(this.Nr.containsKey(t))}}class ff{constructor(e,t){this.Lr={},this.overlays={},this.kr=new va(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new df(this),this.indexManager=new yd,this.remoteDocumentCache=function(e){return new cf(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Rh(t),this.$r=new sf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new of,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new uf(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){vo("MemoryPersistence","Starting transaction:",e);const r=new pf(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return oa.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class pf extends ia{constructor(e){super(),this.currentSequenceNumber=e}}class mf{constructor(e){this.persistence=e,this.zr=new af,this.jr=null}static Hr(e){return new mf(e)}get Jr(){if(this.jr)return this.jr;throw So()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),oa.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),oa.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),oa.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oa.forEach(this.Jr,(n=>{const r=Ho.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Bo.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return oa.or([()=>oa.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class gf{constructor(e){this.serializer=e}N(e,t,n,r){const i=new aa("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ka,{unique:!0}),e.createObjectStore("documentMutations")}(e),yf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=oa.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),yf(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ka,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return oa.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ja});t.createIndex("collectionPathOverlayIndex",Ba,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",qa,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Da});t.createIndex("documentKeyIndex",Aa),t.createIndex("collectionGroupIndex",Pa)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Fa}).createIndex("sequenceNumberIndex",Va,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:za}).createIndex("documentKeyIndex",Ua,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Nd(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>oa.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>oa.forEach(n,(n=>{Eo(n.userId===t.userId);const r=zh(this.serializer,n);return Cd(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new Ko(n),o=function(e){return[0,Sa(e)]}(s);r.push(t.get(o).next((n=>n?oa.resolve():(n=>t.put({targetId:0,path:Sa(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>oa.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Ma});const n=t.store("collectionParents"),r=new vd,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Sa(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Ko(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=xa(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Uh(n),i=jh(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Ho(Ko.fromString(e.document.name).popFirst(5)):e.noDocument?Ho.fromSegments(e.noDocument.path):e.unknownDocument?Ho.fromSegments(e.unknownDocument.path):So()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>oa.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Yd(this.serializer),i=new ff(mf.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Wu();zh(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),oa.forEach(n,((e,n)=>{const s=new po(n),o=Yh.lt(this.serializer,s),a=i.getIndexManager(s),l=Dd.lt(s,this.serializer,a,i.referenceDelegate);return new rf(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Ya(t,va._e),e).next()}))}))}}function yf(e){e.createObjectStore("targetDocuments",{keyPath:Ra}).createIndex("documentTargetsIndex",Oa,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",La,{unique:!0}),e.createObjectStore("targetGlobal")}const vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wf{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!wf.D())throw new ko(xo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gd(this,r),this.Ti=t+"main",this.serializer=new Rh(a),this.Ei=new la(this.Ti,this.ui,new gf(this.serializer)),this.Qr=new Md(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Yd(this.serializer),this.$r=new Qh,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&wo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ko(xo.FAILED_PRECONDITION,vf);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new va(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>_f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(ha(e))return vo("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return vo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return bf(e).get("owner").next((e=>oa.resolve(this.Si(e))))}bi(e){return _f(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=$a(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return oa.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?oa.resolve(!0):bf(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ko(xo.FAILED_PRECONDITION,vf);return!1}}return!(!this.networkEnabled||!this.inForeground)||_f(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&vo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Ya(e,va._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>_f(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Dd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bd(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){vo("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Wa:14===e?Ha:13===e?Qa:12===e?Ga:11===e?Ka:void So()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Ya(r,this.kr?this.kr.next():va._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw wo("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new ko(xo.FAILED_PRECONDITION,ra);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return bf(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ko(xo.FAILED_PRECONDITION,vf)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bf(e).put("owner",t)}static D(){return la.D()}yi(e){const t=bf(e);return t.get("owner").next((e=>this.Si(e)?(vo("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oa.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(wo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;we()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return vo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return wo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){wo("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function bf(e){return $a(e,"owner")}function _f(e){return $a(e,"clientMetadata")}function Sf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ef{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Wu(),r=Wu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ef(e,t.fromCache,n,r)}}class If{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xf{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=we()?8:la.v(ve())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new If;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(yo()<=Me.DEBUG&&vo("QueryEngine","SDK will not create cache indexes for query:",Pu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),oa.resolve()):(yo()<=Me.DEBUG&&vo("QueryEngine","Query:",Pu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(yo()<=Me.DEBUG&&vo("QueryEngine","The SDK decides to create cache indexes for query:",Pu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ku(t))):oa.resolve())}ji(e,t){if(Eu(t))return oa.resolve(null);let n=ku(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Nu(t,null,"F"),n=ku(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Wu(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Nu(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Eu(t)||r.isEqual(Bo.min())?oa.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?oa.resolve(null):(yo()<=Me.DEBUG&&vo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pu(t)),this.es(e,s,t,Zo(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new rl(Ou(e));return t.forEach(((t,r)=>{Lu(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return yo()<=Me.DEBUG&&vo("QueryEngine","Using full collection scan to execute query:",Pu(t)),this.zi.getDocumentsMatchingQuery(e,t,ta.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class kf{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new el(Vo),this.rs=new Fu((e=>pu(e)),mu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Tf(e,t,n,r){return new kf(e,t,n,r)}async function Cf(e,t){const n=Io(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Wu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Nf(e){const t=Io(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Df(e,t,n){let r=Wu(),i=Wu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=zu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Bo.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):vo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Af(e,t){const n=Io(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Pf(e,t){const n=Io(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,oa.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Lh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Lf(e,t,n){const r=Io(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ha(e))throw e;vo("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Rf(e,t,n){const r=Io(e);let i=Bo.min(),s=Wu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Io(e),i=r.rs.get(n);return void 0!==i?oa.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,ku(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Bo.min(),n?s:Wu()))).next((e=>(Ff(r,Ru(t),e),{documents:e,hs:s})))))}function Of(e,t){const n=Io(e),r=Io(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Mf(e,t){const n=Io(e),r=n.ss.get(t)||Bo.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Zo(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Ff(n,t,e),e)))}function Ff(e,t,n){let r=e.ss.get(t)||Bo.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Vf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wu();const r=await Pf(e,ku(Bh(t.bundledQuery))),i=Io(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=ah(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(ll.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function zf(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Uf(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function jf(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Bf{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ko(r.error.code,r.error.message))),s?new Bf(e,t,r.state,i):(wo("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qf{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ko(n.error.code,n.error.message))),i?new qf(e,n.state,r):(wo("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=$u();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=_a(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Kf(e,i):(wo("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Gf{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Gf(t.clientId,t.onlineState):(wo("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Qf{constructor(){this.activeTargetIds=$u()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hf{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new el(Vo),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=zf(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Qf),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(zf(this.persistenceKey,n));if(e){const t=Kf.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(jf(this.persistenceKey,e));if(n){const r=qf.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jf(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return vo("SharedClientState","READ",e,t),t}setItem(e,t){vo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){vo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(vo("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void wo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=va._e;if(null!=e)try{const n=JSON.parse(e);Eo("number"==typeof n),t=n}catch(e){wo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==va._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new Bf(this.currentUser,e,t,n),i=Uf(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Uf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=jf(this.persistenceKey,e),i=new qf(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Kf.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Bf.Es(new po(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return qf.Es(r,t)}xs(e){return Gf.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);vo("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=$u();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Wf{constructor(){this.no=new Qf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Qf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yf{io(e){}shutdown(){}}class $f{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){vo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){vo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xf=null;function Jf(){return null===Xf?Xf=268435456+Math.round(2147483648*Math.random()):Xf++,"0x"+Xf.toString(16)}const Zf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ep{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const tp="WebChannelConnection";class np extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Jf(),o=this.bo(e,t.toUriEncodedString());vo("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(vo("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw bo("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+mo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Zf[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Jf();return new Promise(((s,o)=>{const a=new uo;a.setWithCredentials(!0),a.listenOnce(so.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case io.NO_ERROR:const t=a.getResponseJson();vo(tp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case io.TIMEOUT:vo(tp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ko(xo.DEADLINE_EXCEEDED,"Request time out"));break;case io.HTTP_ERROR:const n=a.getStatus();if(vo(tp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(xo).indexOf(t)>=0?t:xo.UNKNOWN}(t.status);o(new ko(e,t.message))}else o(new ko(xo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ko(xo.UNAVAILABLE,"Connection failed."));break;default:So()}}finally{vo(tp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);vo(tp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Jf(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=no(),o=ro(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");vo(tp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new ep({lo:t=>{d?vo(tp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(vo(tp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),vo(tp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,lo.EventType.OPEN,(()=>{d||vo(tp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,lo.EventType.CLOSE,(()=>{d||(d=!0,vo(tp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,lo.EventType.ERROR,(t=>{d||(d=!0,bo(tp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new ko(xo.UNAVAILABLE,"The operation could not be completed")))})),p(c,lo.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Eo(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){vo(tp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Lc[e];if(void 0!==t)return Mc(t)}(t),i=o.message;void 0===n&&(n=xo.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new ko(n,i)),c.close()}else vo(tp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,oo.STAT_EVENT,(t=>{t.stat===ao.PROXY?vo(tp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ao.NOPROXY&&vo(tp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function rp(){return"undefined"!=typeof window?window:null}function ip(){return"undefined"!=typeof document?document:null}function sp(e){return new nh(e,!0)}class op{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&vo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class ap{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new op(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===xo.RESOURCE_EXHAUSTED?(wo(t.toString()),wo("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===xo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new ko(xo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return vo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(vo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lp extends ap{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:So()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Eo(void 0===t||"string"==typeof t),ll.fromBase64String(t||"")):(Eo(void 0===t||t instanceof Uint8Array),ll.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?xo.UNKNOWN:Mc(e.code);return new ko(t,e.message||"")}(o);n=new Wc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(e,r.document.name),s=ah(r.document.updateTime),o=r.document.createTime?ah(r.document.createTime):Bo.min(),a=new zl({mapValue:{fields:r.document.fields}}),l=jl.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Qc(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=dh(e,r.document),s=r.readTime?ah(r.readTime):Bo.min(),o=jl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=dh(e,r.document),s=r.removedTargetIds||[];n=new Qc([],s,i,null)}else{if(!("filter"in t))return So();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Pc(r,i),o=e.targetId;n=new Hc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Bo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Bo.min():t.readTime?ah(t.readTime):Bo.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=mh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=gu(r)?{documents:_h(e,r)}:{query:Sh(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=sh(e,t.resumeToken);const r=rh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Bo.min())>0){n.readTime=ih(e,t.snapshotVersion.toTimestamp());const r=rh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return So()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=mh(this.serializer),t.removeTarget=e,this.t_(t)}}class up extends ap{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Eo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Eo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ah(e.updateTime):ah(t);return n.isEqual(Bo.min())&&(n=ah(t)),new fc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ah(e.commitTime);return this.listener.T_(n,t)}return Eo(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=mh(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>wh(this.serializer,e)))};this.t_(t)}}class cp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new ko(xo.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,uh(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===xo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ko(xo.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,uh(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===xo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ko(xo.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class hp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(wo(t),this.g_=!1):vo("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class dp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{_p(this)&&(vo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Io(e);t.v_.add(4),await pp(t),t.x_.set("Unknown"),t.v_.delete(4),await fp(t)}(this))}))})),this.x_=new hp(n,r)}}async function fp(e){if(_p(e))for(const t of e.F_)await t(!0)}async function pp(e){for(const t of e.F_)await t(!1)}function mp(e,t){const n=Io(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),bp(n)?wp(n):zp(n).Jo()&&yp(n,t))}function gp(e,t){const n=Io(e),r=zp(n);n.C_.delete(t),r.Jo()&&vp(n,t),0===n.C_.size&&(r.Jo()?r.Xo():_p(n)&&n.x_.set("Unknown"))}function yp(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zp(e).c_(t)}function vp(e,t){e.O_.Oe(t),zp(e).l_(t)}function wp(e){e.O_=new $c({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),zp(e).start(),e.x_.p_()}function bp(e){return _p(e)&&!zp(e).Ho()&&e.C_.size>0}function _p(e){return 0===Io(e).v_.size}function Sp(e){e.O_=void 0}async function Ep(e){e.C_.forEach(((t,n)=>{yp(e,t)}))}async function Ip(e,t){Sp(e),bp(e)?(e.x_.S_(t),wp(e)):e.x_.set("Unknown")}async function xp(e,t,n){if(e.x_.set("Online"),t instanceof Wc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){vo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await kp(e,n)}else if(t instanceof Qc?e.O_.$e(t):t instanceof Hc?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Bo.min()))try{const t=await Nf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(ll.EMPTY_BYTE_STRING,r.snapshotVersion)),vp(e,t);const i=new Lh(r.target,t,n,r.sequenceNumber);yp(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){vo("RemoteStore","Failed to raise snapshot:",t),await kp(e,t)}}async function kp(e,t,n){if(!ha(t))throw t;e.v_.add(1),await pp(e),e.x_.set("Offline"),n||(n=()=>Nf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{vo("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await fp(e)}))}function Tp(e,t){return t().catch((n=>kp(e,n,t)))}async function Cp(e){const t=Io(e),n=Up(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Np(t);)try{const e=await Af(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Dp(t,e)}catch(e){await kp(t,e)}Ap(t)&&Pp(t)}function Np(e){return _p(e)&&e.D_.length<10}function Dp(e,t){e.D_.push(t);const n=Up(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Ap(e){return _p(e)&&!Up(e).Ho()&&e.D_.length>0}function Pp(e){Up(e).start()}async function Lp(e){Up(e).d_()}async function Rp(e){const t=Up(e);for(const n of e.D_)t.I_(n.mutations)}async function Op(e,t,n){const r=e.D_.shift(),i=Dc.from(r,t,n);await Tp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Cp(e)}async function Mp(e,t){t&&Up(e).P_&&await async function(e,t){if(function(e){return Oc(e)&&e!==xo.ABORTED}(t.code)){const n=e.D_.shift();Up(e).Zo(),await Tp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Cp(e)}}(e,t),Ap(e)&&Pp(e)}async function Fp(e,t){const n=Io(e);n.asyncQueue.verifyOperationInProgress(),vo("RemoteStore","RemoteStore received new credentials");const r=_p(n);n.v_.add(3),await pp(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await fp(n)}async function Vp(e,t){const n=Io(e);t?(n.v_.delete(2),await fp(n)):t||(n.v_.add(2),await pp(n),n.x_.set("Unknown"))}function zp(e){return e.N_||(e.N_=function(e,t,n){const r=Io(e);return r.R_(),new lp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Ep.bind(null,e),To:Ip.bind(null,e),u_:xp.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),bp(e)?wp(e):e.x_.set("Unknown")):(await e.N_.stop(),Sp(e))}))),e.N_}function Up(e){return e.B_||(e.B_=function(e,t,n){const r=Io(e);return r.R_(),new up(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Lp.bind(null,e),To:Mp.bind(null,e),E_:Rp.bind(null,e),T_:Op.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Cp(e)):(await e.B_.stop(),e.D_.length>0&&(vo("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class jp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new To,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new jp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ko(xo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bp(e,t){if(wo("AsyncQueue","".concat(t,": ").concat(e)),ha(e))return new ko(xo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class qp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ho.comparator(t.key,n.key):(e,t)=>Ho.comparator(e.key,t.key),this.keyedMap=ju(),this.sortedSet=new el(this.comparator)}static emptySet(e){return new qp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Kp{constructor(){this.L_=new el(Ho.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):So():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Gp{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Gp(e,t,qp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Qp{constructor(){this.q_=void 0,this.Q_=[]}}class Hp{constructor(){this.queries=new Fu((e=>Au(e)),Du),this.onlineState="Unknown",this.K_=new Set}}async function Wp(e,t){const n=Io(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Qp),i)try{s.q_=await n.onListen(r)}catch(e){const n=Bp(e,"Initialization of query '".concat(Pu(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&Jp(n)}async function Yp(e,t){const n=Io(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function $p(e,t){const n=Io(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Jp(n)}function Xp(e,t,n){const r=Io(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Jp(e){e.K_.forEach((e=>{e.next()}))}class Zp{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Gp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=Gp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class em{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class tm{constructor(e){this.serializer=e}Ps(e){return dh(this.serializer,e)}Is(e){return e.metadata.exists?vh(this.serializer,e.document,!1):jl.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ah(e)}}class nm{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rm(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=Ko.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new tm(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Wu()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Io(e);let s=Wu(),o=zu();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(s=s.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Pf(i,function(e){return ku(Su(Ko.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Df(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new tm(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Vf(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function rm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class im{constructor(e){this.key=e}}class sm{constructor(e){this.key=e}}class om{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Wu(),this.mutatedKeys=Wu(),this.ua=Ou(e),this.ca=new qp(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new Kp,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Lu(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ua(c,a)>0||l&&this.ua(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return So()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new Gp(this.query,e.ca,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Kp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Wu(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new sm(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new im(n))})),t}Ra(e){this.oa=e.hs,this.aa=Wu();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Gp.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class am{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class lm{constructor(e){this.key=e,this.ma=!1}}class um{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Fu((e=>Au(e)),Du),this.pa=new Map,this.ya=new Set,this.wa=new el(Ho.comparator),this.Sa=new Map,this.ba=new af,this.Da={},this.Ca=new Map,this.va=Od.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function cm(e,t){const n=Mm(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Pf(n.localStore,ku(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await hm(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&mp(n.remoteStore,e)}return i}async function hm(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Rf(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Sm(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await Rf(e.localStore,t,!0),o=new om(t,s.hs),a=o.ha(s.documents),l=Gc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Sm(e,n,u.da);const c=new am(t,n,o);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function dm(e,t){const n=Io(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!Du(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Lf(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),gp(n.remoteStore,r.targetId),bm(n,r.targetId)})).catch(sa)):(bm(n,r.targetId),await Lf(n.localStore,r.targetId,!0))}async function fm(e,t){const n=Io(e);try{const e=await function(e,t){const n=Io(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(ll.EMPTY_BYTE_STRING,Bo.min()).withLastLimboFreeSnapshotVersion(Bo.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=zu(),l=Wu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Df(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Bo.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return oa.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Eo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Eo(r.ma):e.removedDocuments.size>0&&(Eo(r.ma),r.ma=!1))})),await xm(n,e,t)}catch(e){await sa(e)}}function pm(e,t,n){const r=Io(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Io(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Jp(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mm(e,t,n){const r=Io(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new el(Ho.comparator);e=e.insert(s,jl.newNoDocument(s,Bo.min()));const n=Wu().add(s),i=new Kc(Bo.min(),new Map,new el(Vo),e,n);await fm(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Im(r)}else await Lf(r.localStore,t,!1).then((()=>bm(r,t,n))).catch(sa)}async function gm(e,t){const n=Io(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Io(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=oa.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Eo(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Wu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);wm(n,r,null),vm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xm(n,e)}catch(e){await sa(e)}}async function ym(e,t,n){const r=Io(e);try{const e=await function(e,t){const n=Io(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Eo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);wm(r,t,n),vm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xm(r,e)}catch(n){await sa(n)}}function vm(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function wm(e,t,n){const r=Io(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function bm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||_m(e,t)}))}function _m(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(gp(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Im(e))}function Sm(e,t,n){for(const r of n)r instanceof im?(e.ba.addReference(r.key,t),Em(e,r)):r instanceof sm?(vo("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||_m(e,r.key)):So()}function Em(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(vo("SyncEngine","New document in limbo: "+n),e.ya.add(r),Im(e))}function Im(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new Ho(Ko.fromString(t)),r=e.va.next();e.Sa.set(r,new lm(n)),e.wa=e.wa.insert(n,r),mp(e.remoteStore,new Lh(ku(Su(n.path)),r,"TargetPurposeLimboResolution",va._e))}}async function xm(e,t,n){const r=Io(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Ef.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Io(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>oa.forEach(t,(t=>oa.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>oa.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ha(e))throw e;vo("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function km(e,t){const n=Io(e);if(!n.currentUser.isEqual(t)){vo("SyncEngine","User change. New user:",t.toKey());const e=await Cf(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new ko(xo.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xm(n,e.us)}}function Tm(e,t){const n=Io(e),r=n.Sa.get(t);if(r&&r.ma)return Wu().add(r.key);{let e=Wu();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function Cm(e,t){const n=Io(e),r=await Rf(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Sm(n,t.targetId,i.da),i}async function Nm(e,t){const n=Io(e);return Mf(n.localStore,t).then((e=>xm(n,e)))}async function Dm(e,t,n,r){const i=Io(e),s=await function(e,t){const n=Io(e),r=Io(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):oa.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Cp(i.remoteStore):"acknowledged"===n||"rejected"===n?(wm(i,t,r||null),vm(i,t),function(e,t){Io(Io(e).mutationQueue).Mn(t)}(i.localStore,t)):So(),await xm(i,s)):vo("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Am(e,t,n){const r=Io(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await Pf(r.localStore,ku(t[0]));for(const e of t){const t=r.ga.get(e),n=await Cm(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Of(r.localStore,o);e=await Pf(r.localStore,t),await hm(r,Pm(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Pm(e){return _u(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Lm(e){return function(e){return Io(Io(e).persistence).Li()}(Io(e).localStore)}async function Rm(e,t,n,r){const i=Io(e);if(i.Fa)return void vo("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Mf(i.localStore,Ru(s[0])),r=Kc.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ll.EMPTY_BYTE_STRING);await xm(i,e,r);break}case"rejected":await Lf(i.localStore,t,!0),bm(i,t,r);break;default:So()}}async function Om(e,t,n){const r=Mm(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){vo("SyncEngine","Adding an already active target "+e);continue}const t=await Of(r.localStore,e),n=await Pf(r.localStore,t);await hm(r,Pm(t),n.targetId,!1,n.resumeToken),mp(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Lf(r.localStore,e,!1).then((()=>{gp(r.remoteStore,e),bm(r,e)})).catch(sa)}}function Mm(e){const t=Io(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mm.bind(null,t),t.fa.u_=$p.bind(null,t.eventManager),t.fa.xa=Xp.bind(null,t.eventManager),t}function Fm(e){const t=Io(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ym.bind(null,t),t}class Vm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=sp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Tf(this.persistence,new xf,e.initialUser,this.serializer)}createPersistence(e){return new ff(mf.Hr,this.serializer)}createSharedClientState(e){return new Wf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class zm extends Vm{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Fm(this.Na.syncEngine),await Cp(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Tf(this.persistence,new xf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Bd(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ya(t,this.persistence);return new ga(e.asyncQueue,n)}createPersistence(e){const t=Sf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Td.withCacheSize(this.cacheSizeBytes):Td.DEFAULT;return new wf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,rp(),ip(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Wf}}class Um extends zm{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof Hf&&(this.sharedClientState.syncEngine={Zs:Dm.bind(null,t),Xs:Rm.bind(null,t),eo:Om.bind(null,t),Li:Lm.bind(null,t),Ys:Nm.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Io(e);if(Mm(n),Fm(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Am(n,e.toArray());n.Fa=!0,await Vp(n.remoteStore,!0);for(const r of t)mp(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(bm(n,i),Lf(n.localStore,i,!0)))),gp(n.remoteStore,i)})),await t,await Am(n,e),function(e){const t=Io(e);t.Sa.forEach(((e,n)=>{gp(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new el(Ho.comparator)}(n),n.Fa=!1,await Vp(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=rp();if(!Hf.D(t))throw new ko(xo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Sf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class jm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=km.bind(null,this.syncEngine),await Vp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Hp}createDatastore(e){const t=sp(e.databaseInfo.databaseId),n=function(e){return new np(e)}(e.databaseInfo);return function(e,t,n,r){return new cp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new dp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>pm(this.syncEngine,e,0)),$f.D()?new $f:new Yf)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new um(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Io(e);vo("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await pp(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Bm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class qm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):wo("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Km{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new To,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new em(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Gm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ko(xo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Io(e),r={documents:t.map((e=>hh(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,Ko.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Eo(!!t.found),t.found.name,t.found.updateTime;const n=dh(e,t.found.name),r=ah(t.found.updateTime),i=t.found.createTime?ah(t.found.createTime):Bo.min(),s=new zl({mapValue:{fields:t.found.fields}});return jl.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Eo(!!t.missing),Eo(!!t.readTime);const n=dh(e,t.missing),r=ah(t.readTime);return jl.newNoDocument(n,r)}(e,t):So()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Eo(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ho.fromPath(t);this.mutations.push(new Cc(n,this.precondition(n)))})),await async function(e,t){const n=Io(e),r={writes:t.map((e=>wh(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,Ko.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw So();t=Bo.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ko(xo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Bo.min())?pc.exists(!1):pc.updateTime(t):pc.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bo.min()))throw new ko(xo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pc.updateTime(t)}return pc.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Qm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new op(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new Gm(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!wa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Oc(t)}return!1}}class Hm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=po.UNAUTHENTICATED,this.clientId=Fo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{vo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(vo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ko(xo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new To;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Bp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Wm(e,t){e.asyncQueue.verifyOperationInProgress(),vo("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Cf(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ym(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Xm(e);vo("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Fp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Fp(t.remoteStore,n))),e._onlineComponents=t}function $m(e){return"FirebaseError"===e.name?e.code===xo.FAILED_PRECONDITION||e.code===xo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Xm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vo("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!$m(n))throw n;bo("Error using user provided cache. Falling back to memory cache: "+n),await Wm(e,new Vm)}}else vo("FirestoreClient","Using default OfflineComponentProvider"),await Wm(e,new Vm);return e._offlineComponents}async function Jm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vo("FirestoreClient","Using user provided OnlineComponentProvider"),await Ym(e,e._uninitializedComponentsProvider._online)):(vo("FirestoreClient","Using default OnlineComponentProvider"),await Ym(e,new jm))),e._onlineComponents}function Zm(e){return Xm(e).then((e=>e.persistence))}function eg(e){return Xm(e).then((e=>e.localStore))}function tg(e){return Jm(e).then((e=>e.remoteStore))}function ng(e){return Jm(e).then((e=>e.syncEngine))}function rg(e){return Jm(e).then((e=>e.datastore))}async function ig(e){const t=await Jm(e),n=t.eventManager;return n.onListen=cm.bind(null,t.syncEngine),n.onUnlisten=dm.bind(null,t.syncEngine),n}function sg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new To;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new qm({next:s=>{t.enqueueAndForget((()=>Yp(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new ko(xo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ko(xo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Zp(Su(n.path),s,{includeMetadataChanges:!0,Z_:!0});return Wp(e,o)}(await ig(e),e.asyncQueue,t,n,r))),r.promise}function og(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new To;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new qm({next:n=>{t.enqueueAndForget((()=>Yp(e,o))),n.fromCache&&"server"===r.source?i.reject(new ko(xo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Zp(n,s,{includeMetadataChanges:!0,Z_:!0});return Wp(e,o)}(await ig(e),e.asyncQueue,t,n,r))),r.promise}function ag(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Vc().encode(e):e,function(e,t){return new Km(e,t)}(function(e,t){if(e instanceof Uint8Array)return Bm(e,t);if(e instanceof ArrayBuffer)return Bm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,sp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Io(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Io(e),r=ah(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(rm(r));const i=new nm(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await xm(e,o.sa,void 0),await function(e,t){const n=Io(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return bo("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await ng(e),i,r)}))}function lg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ug=new Map;function cg(e,t,n){if(!n)throw new ko(xo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function hg(e,t,n,r){if(!0===t&&!0===r)throw new ko(xo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function dg(e){if(!Ho.isDocumentKey(e))throw new ko(xo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function fg(e){if(Ho.isDocumentKey(e))throw new ko(xo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function pg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":So()}function mg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ko(xo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pg(e);throw new ko(xo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function gg(e,t){if(t<=0)throw new ko(xo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class yg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ko(xo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ko(xo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ko(xo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ko(xo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ko(xo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ko(xo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ko(xo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new No;switch(e.type){case"firstParty":return new Lo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ko(xo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ug.get(e);t&&(vo("ComponentProvider","Removing Datastore"),ug.delete(e),t.terminate())}(this),Promise.resolve()}}function wg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=mg(e,vg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=po.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ko(xo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new po(s)}e._authCredentials=new Do(new Co(t,n))}}class bg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bg(this.firestore,e,this._query)}}class _g{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _g(this.firestore,e,this._key)}}class Sg extends bg{constructor(e,t,n){super(e,t,Su(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _g(this.firestore,null,new Ho(e))}withConverter(e){return new Sg(this.firestore,e,this._path)}}function Eg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=De(e),cg("collection","path",t),e instanceof vg){const n=Ko.fromString(t,...r);return fg(n),new Sg(e,null,n)}{if(!(e instanceof _g||e instanceof Sg))throw new ko(xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ko.fromString(t,...r));return fg(n),new Sg(e.firestore,null,n)}}function Ig(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=De(e),1===arguments.length&&(t=Fo.newId()),cg("doc","path",t),e instanceof vg){const n=Ko.fromString(t,...r);return dg(n),new _g(e,null,new Ho(n))}{if(!(e instanceof _g||e instanceof Sg))throw new ko(xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ko.fromString(t,...r));return dg(n),new _g(e.firestore,e instanceof Sg?e.converter:null,new Ho(n))}}function xg(e,t){return e=De(e),t=De(t),(e instanceof _g||e instanceof Sg)&&(t instanceof _g||t instanceof Sg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function kg(e,t){return e=De(e),t=De(t),e instanceof bg&&t instanceof bg&&e.firestore===t.firestore&&Du(e._query,t._query)&&e.converter===t.converter}class Tg{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new op(this,"async_queue_retry"),this._u=()=>{const e=ip();e&&vo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=ip();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=ip();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new To;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ha(e))throw e;vo("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw wo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=jp.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&So()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Cg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ng{constructor(){this._progressObserver={},this._taskCompletionResolver=new To,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Dg extends vg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Tg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pg(this),this._firestoreClient.terminate()}}function Ag(e){return e._firestoreClient||Pg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Pg(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new gl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,lg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Hm(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Lg(e,t,n){const r=new To;return e.asyncQueue.enqueue((async()=>{try{await Wm(e,n),await Ym(e,t),r.resolve()}catch(e){const n=e;if(!$m(n))throw n;bo("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Rg(e){return function(e){const t=new To;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Io(e);_p(n.remoteStore)||vo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Io(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=Bp(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ng(e),t))),t.promise}(Ag(e=mg(e,Dg)))}function Og(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Zm(e),n=await tg(e);return t.setNetworkEnabled(!0),function(e){const t=Io(e);return t.v_.delete(0),fp(t)}(n)}))}(Ag(e=mg(e,Dg)))}function Mg(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Zm(e),n=await tg(e);return t.setNetworkEnabled(!1),async function(e){const t=Io(e);t.v_.add(0),await pp(t),t.x_.set("Offline")}(n)}))}(Ag(e=mg(e,Dg)))}function Fg(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Io(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await eg(e),t)))}(Ag(e=mg(e,Dg)),t).then((t=>t?new bg(e,null,t.query):null))}function Vg(e){if(e._initialized||e._terminated)throw new ko(xo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zg(ll.fromBase64String(e))}catch(e){throw new ko(xo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new zg(ll.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ug{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ko(xo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jg{constructor(e){this._methodName=e}}class Bg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ko(xo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ko(xo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vo(this._lat,e._lat)||Vo(this._long,e._long)}}const qg=/^__.*__$/;class Kg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sc(e,this.data,t,this.fieldTransforms)}}class Gg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw So()}}class Hg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return fy(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Qg(this.du)&&qg.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Wg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sp(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Hg({du:e,methodName:t,wu:n,path:Qo.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yg(e){const t=e._freezeSettings(),n=sp(e._databaseId);return new Wg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $g(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);uy("Data must be an object, but it was:",o,r);const a=ay(r,o);let l,u;if(s.merge)l=new ol(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=cy(t,r,n);if(!o.contains(i))throw new ko(xo.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));py(e,i)||e.push(i)}l=new ol(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new Kg(new zl(a),l,u)}class Xg extends jg{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xg}}function Jg(e,t,n){return new Hg({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Zg extends jg{_toFieldTransform(e){return new dc(e.path,new ic)}isEqual(e){return e instanceof Zg}}class ey extends jg{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Jg(this,e,!0),n=this.bu.map((e=>oy(e,t))),r=new sc(n);return new dc(e.path,r)}isEqual(e){return e instanceof ey&&xe(this.bu,e.bu)}}class ty extends jg{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Jg(this,e,!0),n=this.bu.map((e=>oy(e,t))),r=new ac(n);return new dc(e.path,r)}isEqual(e){return e instanceof ty&&xe(this.bu,e.bu)}}class ny extends jg{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new uc(e.serializer,Zu(e.serializer,this.Du));return new dc(e.path,t)}isEqual(e){return e instanceof ny&&this.Du===e.Du}}function ry(e,t,n,r){const i=e.Su(1,t,n);uy("Data must be an object, but it was:",i,r);const s=[],o=zl.empty();Ja(r,((e,r)=>{const a=dy(t,e,n);r=De(r);const l=i.fu(a);if(r instanceof Xg)s.push(a);else{const e=oy(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ol(s);return new Gg(o,a,i.fieldTransforms)}function iy(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[cy(t,r,n)],l=[i];if(s.length%2!=0)throw new ko(xo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(cy(t,s[d])),l.push(s[d+1]);const u=[],c=zl.empty();for(let d=a.length-1;d>=0;--d)if(!py(u,a[d])){const e=a[d];let t=l[d];t=De(t);const n=o.fu(e);if(t instanceof Xg)u.push(e);else{const r=oy(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new ol(u);return new Gg(c,h,o.fieldTransforms)}function sy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return oy(n,e.Su(r?4:3,t))}function oy(e,t){if(ly(e=De(e)))return uy("Unsupported field value:",t,e),ay(e,t);if(e instanceof jg)return function(e,t){if(!Qg(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=oy(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=De(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Zu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=jo.fromDate(e);return{timestampValue:ih(t.serializer,n)}}if(e instanceof jo){const n=new jo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ih(t.serializer,n)}}if(e instanceof Bg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zg)return{bytesValue:sh(t.serializer,e._byteString)};if(e instanceof _g){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:lh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(pg(e)))}(e,t)}function ay(e,t){const n={};return Za(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ja(e,((e,r)=>{const i=oy(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ly(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jo||e instanceof Bg||e instanceof zg||e instanceof _g||e instanceof jg)}function uy(e,t,n){if(!ly(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=pg(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function cy(e,t,n){if((t=De(t))instanceof Ug)return t._internalPath;if("string"==typeof t)return dy(e,t);throw fy("Field path arguments must be of type string or ",e,!1,void 0,n)}const hy=new RegExp("[~\\*/\\[\\]]");function dy(e,t,n){if(t.search(hy)>=0)throw fy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ug(...t.split("."))._internalPath}catch(on){throw fy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function fy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new ko(xo.INVALID_ARGUMENT,a+e+l)}function py(e,t){return e.some((e=>e.isEqual(t)))}class my{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _g(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gy extends my{data(){return super.data()}}function yy(e,t){return"string"==typeof t?dy(e,t):t instanceof Ug?t._internalPath:t._delegate._internalPath}function vy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ko(xo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wy{}class by extends wy{}function _y(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof wy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Ey)).length,n=e.filter((e=>e instanceof Sy)).length;if(t>1||t>0&&n>0)throw new ko(xo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Sy extends by{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Sy(e,t,n)}_apply(e){const t=this._parse(e);return Ay(e._query,t),new bg(e.firestore,e.converter,Cu(e._query,t))}_parse(e){const t=Yg(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ko(xo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Dy(o,s);const t=[];for(const n of o)t.push(Ny(r,e,n));a={arrayValue:{values:t}}}else a=Ny(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Dy(o,s),a=sy(n,t,o,"in"===s||"not-in"===s);return Wl.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ey extends wy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ey(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Yl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ay(n,i),n=Cu(n,i)}(e._query,t),new bg(e.firestore,e.converter,Cu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Iy extends by{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Iy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ko(xo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ko(xo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gl(t,n)}(e._query,this._field,this._direction);return new bg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class xy extends by{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new xy(e,t,n)}_apply(e){return new bg(e.firestore,e.converter,Nu(e._query,this._limit,this._limitType))}}class ky extends by{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ky(e,t,n)}_apply(e){const t=Cy(e,this.type,this._docOrFields,this._inclusive);return new bg(e.firestore,e.converter,function(e,t){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Ty extends by{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ty(e,t,n)}_apply(e){const t=Cy(e,this.type,this._docOrFields,this._inclusive);return new bg(e.firestore,e.converter,function(e,t){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Cy(e,t,n,r){if(n[0]=De(n[0]),n[0]instanceof my)return function(e,t,n,r,i){if(!r)throw new ko(xo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of xu(e))if(o.field.isKeyField())s.push(Tl(t,r.key));else{const e=r.data.field(o.field);if(fl(e))throw new ko(xo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new ko(xo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Bl(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Yg(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new ko(xo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new ko(xo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Iu(e)&&-1!==s.indexOf("/"))throw new ko(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Ko.fromString(s));if(!Ho.isDocumentKey(n))throw new ko(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ho(n);a.push(Tl(t,i))}else{const e=sy(n,r,s);a.push(e)}}return new Bl(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Ny(e,t,n){if("string"==typeof(n=De(n))){if(""===n)throw new ko(xo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iu(t)&&-1!==n.indexOf("/"))throw new ko(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ko.fromString(n));if(!Ho.isDocumentKey(r))throw new ko(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Tl(e,new Ho(r))}if(n instanceof _g)return Tl(e,n._key);throw new ko(xo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(pg(n),"."))}function Dy(e,t){if(!Array.isArray(e)||0===e.length)throw new ko(xo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ay(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ko(xo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ko(xo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Py{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw So()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ja(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Bg(hl(e.latitude),hl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=pl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=cl(e);return new jo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ko.fromString(e);Eo(Ph(n));const r=new yl(n.get(1),n.get(3)),i=new Ho(n.popFirst(5));return r.isEqual(t)||wo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ly(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ry extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new zg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _g(this.firestore,null,t)}}class Oy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class My extends my{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Fy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(yy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Fy extends My{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Vy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Oy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Fy(this._firestore,this._userDataWriter,n.key,n,new Oy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ko(xo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Fy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Oy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Fy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Oy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:zy(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function zy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return So()}}function Uy(e,t){return e instanceof My&&t instanceof My?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Vy&&t instanceof Vy&&e._firestore===t._firestore&&kg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class jy extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new zg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _g(this.firestore,null,t)}}function By(e){e=mg(e,_g);const t=mg(e.firestore,Dg),n=Ag(t),r=new jy(t);return function(e,t){const n=new To;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Io(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ko(xo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Bp(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await eg(e),t,n))),n.promise}(n,e._key).then((n=>new My(t,r,e._key,n,new Oy(null!==n&&n.hasLocalMutations,!0),e.converter)))}function qy(e){e=mg(e,bg);const t=mg(e.firestore,Dg),n=Ag(t),r=new jy(t);return function(e,t){const n=new To;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Rf(e,t,!0),i=new om(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Bp(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await eg(e),t,n))),n.promise}(n,e._query).then((n=>new Vy(t,r,e,n)))}function Ky(e,t,n){e=mg(e,_g);const r=mg(e.firestore,Dg),i=Ly(e.converter,t,n);return Wy(r,[$g(Yg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,pc.none())])}function Gy(e,t,n){e=mg(e,_g);const r=mg(e.firestore,Dg),i=Yg(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=De(t))||t instanceof Ug?iy(i,"updateDoc",e._key,t,n,a):ry(i,"updateDoc",e._key,t),Wy(r,[s.toMutation(e._key,pc.exists(!0))])}function Qy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=De(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Cg(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(Cg(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof _g)h=mg(e.firestore,Dg),d=Su(e._key.path),c={next:t=>{n[l]&&n[l](Yy(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=mg(e,bg);h=mg(t.firestore,Dg),d=t._query;const r=new jy(h);c={next:e=>{n[l]&&n[l](new Vy(h,r,t,e))},error:n[l+1],complete:n[l+2]},vy(e._query)}return function(e,t,n,r){const i=new qm(r),s=new Zp(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Wp(await ig(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>Yp(await ig(e),s)))}}(Ag(h),d,u,c)}function Hy(e,t){return function(e,t){const n=new qm(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Io(e).K_.add(t),t.next()}(await ig(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Io(e).K_.delete(t)}(await ig(e),n)))}}(Ag(e=mg(e,Dg)),Cg(t)?t:{next:t})}function Wy(e,t){return function(e,t){const n=new To;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Fm(e);try{const e=await function(e,t){const n=Io(e),r=jo.now(),i=t.reduce(((e,t)=>e.add(t.key)),Wu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=zu(),l=Wu();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=bc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ec(e.key,t,Ul(t.value.mapValue),pc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Bu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new el(Vo)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await xm(r,e.changes),await Cp(r.remoteStore)}catch(e){const t=Bp(e,"Failed to persist write");n.reject(t)}}(await ng(e),t,n))),n.promise}(Ag(e),t)}function Yy(e,t,n){const r=n.docs.get(t._key),i=new jy(e);return new My(e,i,t._key,r,new Oy(n.hasPendingWrites,n.fromCache),t.converter)}const $y={maxAttempts:5};class Xy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yg(e)}set(e,t,n){this._verifyNotCommitted();const r=Jy(e,this._firestore),i=Ly(r.converter,t,n),s=$g(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,pc.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Jy(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=De(t))||t instanceof Ug?iy(this._dataReader,"WriteBatch.update",r._key,t,n,o):ry(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,pc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jy(e,this._firestore);return this._mutations=this._mutations.concat(new Tc(t._key,pc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ko(xo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jy(e,t){if((e=De(e)).firestore!==t)throw new ko(xo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Zy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yg(e)}get(e){const t=Jy(e,this._firestore),n=new Ry(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return So();const r=e[0];if(r.isFoundDocument())return new my(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new my(this._firestore,n,t._key,null,t.converter);throw So()}))}set(e,t,n){const r=Jy(e,this._firestore),i=Ly(r.converter,t,n),s=$g(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Jy(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=De(t))||t instanceof Ug?iy(this._dataReader,"Transaction.update",r._key,t,n,o):ry(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Jy(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jy(e,this._firestore),n=new jy(this._firestore);return super.get(e).then((e=>new My(this._firestore,n,t._key,e._document,new Oy(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){mo=e}(_t),mt(new Ae("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Dg(new Ao(e.getProvider("auth-internal")),new Oo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ko(xo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),kt(fo,"4.4.3",e),kt(fo,"4.4.3","esm2017")}();function ev(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ko("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function tv(){if("undefined"===typeof Uint8Array)throw new ko("unimplemented","Uint8Arrays are not available in this environment.")}function nv(){if("undefined"==typeof atob)throw new ko("unimplemented","Blobs are unavailable in Firestore in this environment.")}class rv{constructor(e){this._delegate=e}static fromBase64String(e){return nv(),new rv(zg.fromBase64String(e))}static fromUint8Array(e){return tv(),new rv(zg.fromUint8Array(e))}toBase64(){return nv(),this._delegate.toBase64()}toUint8Array(){return tv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iv(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class sv{enableIndexedDbPersistence(e,t){return function(e,t){Vg(e=mg(e,Dg));const n=Ag(e);if(n._uninitializedComponentsProvider)throw new ko(xo.FAILED_PRECONDITION,"SDK cache is already specified.");bo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new jm;return Lg(n,i,new zm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Vg(e=mg(e,Dg));const t=Ag(e);if(t._uninitializedComponentsProvider)throw new ko(xo.FAILED_PRECONDITION,"SDK cache is already specified.");bo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new jm;return Lg(t,r,new Um(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ko(xo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new To;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!la.D())return Promise.resolve();const t=e+"main";await la.delete(t)}(Sf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class ov{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof yl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||bo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};wg(this._delegate,e,t,n)}enableNetwork(){return Og(this._delegate)}disableNetwork(){return Mg(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,hg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Rg(this._delegate)}onSnapshotsInSync(e){return Hy(this._delegate,e)}get app(){if(!this._appCompat)throw new ko("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bv(this,Eg(this._delegate,e))}catch(t){throw dv(t,"collection()","Firestore.collection()")}}doc(e){try{return new hv(this,Ig(this._delegate,e))}catch(t){throw dv(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new yv(this,function(e,t){if(e=mg(e,vg),cg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ko(xo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new bg(e,null,function(e){return new bu(Ko.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw dv(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=mg(e,Dg);const r=Object.assign(Object.assign({},$y),n);return function(e){if(e.maxAttempts<1)throw new ko(xo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new To;return e.asyncQueue.enqueueAndForget((async()=>{const i=await rg(e);new Qm(e.asyncQueue,i,n,t,r).ja()})),r.promise}(Ag(e),(n=>t(new Zy(e,n))),r)}(this._delegate,(t=>e(new lv(this,t))))}batch(){return Ag(this._delegate),new uv(new Xy(this._delegate,(e=>Wy(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Ag(e=mg(e,Dg)),r=new Ng;return ag(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Fg(this._delegate,e).then((e=>e?new yv(this,e):null))}}class av extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new rv(new zg(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return hv.forKey(t,this.firestore,null)}}class lv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new av(e)}get(e){const t=_v(e);return this._delegate.get(t).then((e=>new mv(this._firestore,new My(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=_v(e);return n?(ev("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=_v(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=_v(e);return this._delegate.delete(t),this}}class uv{constructor(e){this._delegate=e}set(e,t,n){const r=_v(e);return n?(ev("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=_v(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=_v(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Fy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gv(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=cv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new cv(e,new av(e),t),r.set(t,i)),i}}cv.INSTANCES=new WeakMap;class hv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new av(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ko("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new hv(t,new _g(t._delegate,n,new Ho(e)))}static forKey(e,t,n){return new hv(t,new _g(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new bv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bv(this.firestore,Eg(this._delegate,e))}catch(t){throw dv(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=De(e))instanceof _g&&xg(this._delegate,e)}set(e,t){t=ev("DocumentReference.set",t);try{return t?Ky(this._delegate,e,t):Ky(this._delegate,e)}catch(n){throw dv(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Gy(this._delegate,e):Gy(this._delegate,e,t,...r)}catch(s){throw dv(s,"updateDoc()","DocumentReference.update()")}}delete(){return Wy(mg((e=this._delegate).firestore,Dg),[new Tc(e._key,pc.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=fv(t),i=pv(t,(e=>new mv(this.firestore,new My(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Qy(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?By(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=mg(e,_g);const t=mg(e.firestore,Dg);return sg(Ag(t),e._key,{source:"server"}).then((n=>Yy(t,e,n)))}(this._delegate):function(e){e=mg(e,_g);const t=mg(e.firestore,Dg);return sg(Ag(t),e._key).then((n=>Yy(t,e,n)))}(this._delegate),t.then((e=>new mv(this.firestore,new My(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new hv(this.firestore,e?this._delegate.withConverter(cv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function dv(e,t,n){return e.message=e.message.replace(t,n),e}function fv(e){for(const t of e)if("object"===typeof t&&!iv(t))return t;return{}}function pv(e,t){var n,r;let i;return i=iv(e[0])?e[0]:iv(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Uy(this._delegate,e._delegate)}}class gv extends mv{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||So(),t}}class yv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new av(e)}where(e,t,n){try{return new yv(this.firestore,_y(this._delegate,function(e,t,n){const r=t,i=yy("where",e);return Sy._create(i,r,n)}(e,t,n)))}catch(r){throw dv(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new yv(this.firestore,_y(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yy("orderBy",e);return Iy._create(n,t)}(e,t)))}catch(n){throw dv(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new yv(this.firestore,_y(this._delegate,(gg("limit",t=e),xy._create("limit",t,"F"))))}catch(t){throw dv(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new yv(this.firestore,_y(this._delegate,(gg("limitToLast",t=e),xy._create("limitToLast",t,"L"))))}catch(t){throw dv(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new yv(this.firestore,_y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ky._create("startAt",t,!0)}(...arguments)))}catch(e){throw dv(e,"startAt()","Query.startAt()")}}startAfter(){try{return new yv(this.firestore,_y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ky._create("startAfter",t,!1)}(...arguments)))}catch(e){throw dv(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new yv(this.firestore,_y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ty._create("endBefore",t,!1)}(...arguments)))}catch(e){throw dv(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new yv(this.firestore,_y(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ty._create("endAt",t,!0)}(...arguments)))}catch(e){throw dv(e,"endAt()","Query.endAt()")}}isEqual(e){return kg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?qy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=mg(e,bg);const t=mg(e.firestore,Dg),n=Ag(t),r=new jy(t);return og(n,e._query,{source:"server"}).then((n=>new Vy(t,r,e,n)))}(this._delegate):function(e){e=mg(e,bg);const t=mg(e.firestore,Dg),n=Ag(t),r=new jy(t);return vy(e._query),og(n,e._query).then((n=>new Vy(t,r,e,n)))}(this._delegate),t.then((e=>new wv(this.firestore,new Vy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=fv(t),i=pv(t,(e=>new wv(this.firestore,new Vy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Qy(this._delegate,r,i)}withConverter(e){return new yv(this.firestore,e?this._delegate.withConverter(cv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class vv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new yv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new gv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new vv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new gv(this._firestore,n))}))}isEqual(e){return Uy(this._delegate,e._delegate)}}class bv extends yv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hv(this.firestore,e):null}doc(e){try{return new hv(this.firestore,void 0===e?Ig(this._delegate):Ig(this._delegate,e))}catch(t){throw dv(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=mg(e.firestore,Dg),r=Ig(e),i=Ly(e.converter,t);return Wy(n,[$g(Yg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,pc.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new hv(this.firestore,e)))}isEqual(e){return xg(this._delegate,e._delegate)}withConverter(e){return new bv(this.firestore,e?this._delegate.withConverter(cv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _v(e){return mg(e,_g)}class Sv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Ug(...t)}static documentId(){return new Sv(Qo.keyField().canonicalString())}isEqual(e){return(e=De(e))instanceof Ug&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ev{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Zg("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Ev(e)}static delete(){const e=new Xg("deleteField");return e._methodName="FieldValue.delete",new Ev(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ey("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Ev(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ty("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Ev(e)}static increment(e){const t=new ny("increment",e);return t._methodName="FieldValue.increment",new Ev(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Iv={Firestore:ov,GeoPoint:Bg,Timestamp:jo,Blob:rv,Transaction:lv,WriteBatch:uv,DocumentReference:hv,DocumentSnapshot:mv,Query:yv,QueryDocumentSnapshot:gv,QuerySnapshot:wv,CollectionReference:bv,FieldPath:Sv,FieldValue:Ev,setLogLevel:function(e){var t;t=e,go.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var xv;(function(e,t){e.INTERNAL.registerComponent(new Ae("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Iv)))})(xv=Gt,((e,t)=>new ov(e,t,new sv))),xv.registerVersion("@firebase/firestore-compat","0.3.26");kt("firebase","10.8.1","app");const kv=Gt.initializeApp({apiKey:"AIzaSyDqNldgCTzyRbZu7_pJdaNabsroTk78Hcs",authDomain:"utvonaltervezo-d7071.firebaseapp.com",databaseURL:"https://utvonaltervezo-d7071-default-rtdb.firebaseio.com",projectId:"utvonaltervezo-d7071",storageBucket:"utvonaltervezo-d7071.appspot.com",messagingSenderId:"666628311431",appId:"1:666628311431:web:7399fad2be04bb7d7fab22"}).firestore();function Tv(e){let{onSelectionChange:t}=e;const[n,i]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{try{const e=(await kv.collection("jarmuvek").get()).docs.map((e=>({id:e.id,...e.data()})));i(e)}catch(e){console.error("Hiba az adatok lek\xe9r\xe9se k\xf6zben:",e)}})()}),[]);return(0,se.jsx)(se.Fragment,{children:(0,se.jsxs)("div",{className:"carlist-box",children:[(0,se.jsx)("h2",{children:"Valaszd ki a j\xe1rm\u0171vet/j\xe1rm\u0171veket"}),(0,se.jsx)("ul",{className:"carlist-ul",children:n.map((e=>(0,se.jsxs)("li",{className:"carlist-li",children:[(0,se.jsxs)("label",{className:"carlist-checkbox-label",children:[(0,se.jsx)("input",{type:"checkbox",className:"carlist-checkbox",value:e.rendszam,onChange:()=>{return n=e.rendszam,r=e.fogyasztas,void t(n,r);var n,r}}),"".concat(e.rendszam)]}),(0,se.jsx)("label",{className:"carlist-label2",children:"".concat(e.marka,", ").concat(e.fogyasztas," liter/km")})]},e.rendszam)))})]})})}function Cv(){const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[w,b]=(0,r.useState)("");return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ae,{}),(0,se.jsx)(Tv,{onSelectionChange:(n,r,i)=>{const s=e.hasOwnProperty(n);if(s){if(s){const{[n]:r,...i}=e;t(i)}}else t((e=>({...e,[n]:{rendszam:n,fogyasztas:r}})))}}),(0,se.jsx)("h1",{children:"\xdatvonal r\xf6gz\xedt\xe9se:"}),(0,se.jsxs)("div",{className:"inputbox-container",children:[(0,se.jsxs)("div",{className:"input-container",children:[(0,se.jsx)("h2",{className:"h2",children:"Honnan indul?"}),(0,se.jsxs)("div",{className:"input-box",children:[(0,se.jsx)("label",{required:!0,className:"addcar-Label",children:"Telep\xfcl\xe9s:"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",value:n,type:"text",onChange:e=>{i(e.target.value)}}),(0,se.jsx)("label",{required:!0,className:"addcar-Label",children:"Utca:"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",value:s,type:"text",onChange:e=>{o(e.target.value)}}),(0,se.jsx)("label",{required:!0,className:"addcar-Label",children:"H\xe1zsz\xe1m:"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",value:a,type:"text",onChange:e=>{l(e.target.value)}}),(0,se.jsx)("label",{required:!0,className:"addcar-Label",children:"Megtett Kilom\xe9ter (km):"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",value:y,type:"text",onChange:e=>{v(e.target.value)}})]})]}),(0,se.jsxs)("div",{className:"input-container",children:[(0,se.jsx)("h2",{className:"h2",children:"Adja meg az \xfatic\xe9lt:"}),(0,se.jsxs)("div",{className:"input-box",children:[(0,se.jsx)("label",{className:"addcar-Label",children:"Partner neve:"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",type:"text",value:m,onChange:e=>{g(e.target.value)}}),(0,se.jsx)("label",{required:!0,className:"addcar-Label",children:"Telep\xfcl\xe9s:"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",value:u,type:"text",onChange:e=>{c(e.target.value)}}),(0,se.jsx)("label",{required:!0,className:"addcar-Label",children:"Utca:"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",value:h,type:"text",onChange:e=>{d(e.target.value)}}),(0,se.jsx)("label",{required:!0,className:"addcar-Label",children:"H\xe1zsz\xe1m:"}),(0,se.jsx)("input",{required:!0,className:"addcar-Input",value:f,type:"text",onChange:e=>{p(e.target.value)}})]})]}),(0,se.jsx)("button",{className:"input-button",onClick:async()=>{const t={};let r=0;for(const n in e)e.hasOwnProperty(n)&&(t[r]=e[n],r++);if(0===Object.keys(e).length)return b("Legal\xe1bb egy j\xe1rm\u0171vet v\xe1lasztanod kell!"),void setTimeout((()=>{b("")}),1800);if(isNaN(y)||""===y.trim())return b("A kiom\xe9ter (km) csak sz\xe1m lehet"),void setTimeout((()=>{b("")}),1800);if([n,s,a,u,h,f,m,y].some((e=>""===e.trim())))return b("K\xe9rlek, t\xf6ltsd ki az \xf6sszes mez\u0151t!"),void setTimeout((()=>{b("")}),1800);for(let e=0;e<Object.keys(t).length;e++)try{const r=new Date,i=r.toLocaleDateString(),o=r.toLocaleTimeString();kv.collection("utvonalak").add({dateAndtime:{date:i,time:o},honnan:{telepules:n,utca:s,hazszam:a},hova:{partner:m,telepules:u,utca:h,hazszam:f},km:y,rendszam:t[Object.keys(t)[e]].rendszam,fogyasztas:t[Object.keys(t)[e]].fogyasztas}),b("Sikeres Ment\xe9s")}catch(w){b("Ooopsz! Valami hiba t\xf6rt\xe9nt")}finally{setTimeout((()=>{b(""),i(""),o(""),l(""),g(""),c(""),d(""),p(""),v("")}),1800)}},children:"\xdatvonal R\xf6gz\xedt\xe9se"}),(0,se.jsx)("h3",{className:"h3",children:w})]})]})}const Nv=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)("");return(0,r.useEffect)((()=>{kv.collection("utvonalak").get().then((e=>{let n=0,r=0;e.forEach((e=>{const{km:t,fogyasztas:i}=e.data();let s=parseInt(t),o=parseFloat(i);n+=s,r+=t*o/100})),t(n),i(r.toFixed(2))})).catch((e=>{console.error("Ooops! Valami hiba t\xf6rt\xe9nt",e)}))}),[]),(0,se.jsxs)("div",{className:"box",children:[(0,se.jsxs)("h1",{children:["\xd6sszes megtett km: ",e," km"]}),(0,se.jsxs)("h2",{children:["\xd6sszes elhaszn\xe1lt \xfczemanyag: ",n," liter"]})]})};function Dv(){const[e,t]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{try{const e=await kv.collection("utvonalak").get(),n=[];e.forEach((e=>{const t=e.data();n.push(t)})),t(n)}catch(e){console.error("Ooopsz! Valami hiba t\xf6rt\xe9nt!",e)}})()}),[]);const[n,i]=(0,r.useState)(""),s=e.filter((e=>e.rendszam.toLowerCase().includes(n.toLowerCase())));return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ae,{}),(0,se.jsx)("div",{className:"box",children:(0,se.jsx)("div",{className:"search",children:(0,se.jsx)("input",{placeholder:"Keres\xe9s Rendsz\xe1m alapj\xe1n...",type:"text",value:n,onChange:e=>i(e.target.value)})})}),(0,se.jsx)(Nv,{}),(0,se.jsx)("h1",{children:"R\xf6gz\xedtett \xfatvonalak:"}),(0,se.jsx)("div",{className:"box-container",children:s.map(((e,t)=>(0,se.jsx)("div",{className:"box",children:(0,se.jsx)("ul",{children:(0,se.jsxs)("li",{children:[(0,se.jsxs)("h2",{children:["Rendsz\xe1m: ",e.rendszam]}),(0,se.jsxs)("p",{children:["Honnan: ",e.honnan.telepules," ",e.honnan.utca," ",e.honnan.hazszam]}),(0,se.jsxs)("p",{children:["Hova: ",e.hova.partner," ",e.hova.telepules," ",e.hova.utca," ",e.hova.hazszam]}),(0,se.jsxs)("p",{className:"km-p",children:["Megtett Kilom\xe9ter: ",e.km," km"]}),(0,se.jsxs)("p",{children:["D\xe1tum \xe9s id\u0151: ",e.dateAndtime.date," ",e.dateAndtime.time]})]})})},t)))})]})}function Av(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)("");return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ae,{}),(0,se.jsxs)("div",{className:"header",children:[(0,se.jsx)("h1",{children:"J\xe1rm\u0171 adatai:"}),(0,se.jsx)("p",{children:"Add meg a r\xf6gz\xedteni k\xedv\xe1nt j\xe1rm\u0171 adatait"})]}),(0,se.jsx)("div",{className:"box-container",children:(0,se.jsxs)("div",{className:"box",children:[(0,se.jsx)("label",{className:"addcar-Label",children:"Rendsz\xe1m:"}),(0,se.jsx)("input",{className:"addcar-Input",value:e,type:"text",onChange:e=>{t(e.target.value)}}),(0,se.jsx)("label",{className:"addcar-Label",children:"M\xe1rka:"}),(0,se.jsx)("input",{className:"addcar-Input",value:n,type:"text",onChange:e=>{i(e.target.value)}}),(0,se.jsx)("label",{className:"addcar-Label",children:"Fogyaszt\xe1s:"}),(0,se.jsx)("input",{className:"addcar-Input",value:s,type:"text",placeholder:"liter/100 km",onChange:e=>{o(e.target.value)}}),(0,se.jsx)("button",{className:"default-button add-car-button",onClick:async()=>isNaN(s)||""===s?(l("A fogyaszt\xe1s csak sz\xe1m lehet. A tizedes \xe9rt\xe9ket ponttal add meg!"),void setTimeout((()=>{l("")}),1800)):""===e.trim()||""===n.trim()||""===s.trim()?(l("K\xe9rlek, t\xf6ltsd ki az \xf6sszes k\xf6telez\u0151 mez\u0151t!"),void setTimeout((()=>{l("")}),1800)):(kv.collection("jarmuvek").doc(e).set({rendszam:e,marka:n,fogyasztas:s}).then((e=>{t(""),i(""),o(""),l("Sikeres ment\xe9s!")})).catch((e=>{console.log(e),l("Ooopsz! Valami hiba t\xf6rt\xe9nt")})),void setTimeout((()=>{l("")}),1800)),children:"R\xf6gz\xedt\xe9s"}),(0,se.jsx)("h3",{className:"h3",children:a})]})})]})}const Pv=function(){const e=K();return(0,se.jsxs)(re,{location:e,children:[(0,se.jsx)(te,{index:!0,element:(0,se.jsx)(oe,{})}),(0,se.jsx)(te,{path:"userinputs",element:(0,se.jsx)(Cv,{})}),(0,se.jsx)(te,{path:"listvehicles",element:(0,se.jsx)(Dv,{})}),(0,se.jsx)(te,{path:"addcar",element:(0,se.jsx)(Av,{})})]},e.pathname)},Lv=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};var Rv=n(950),Ov=n.t(Rv,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Uv){}new Map;const Mv=i.startTransition;Ov.flushSync,i.useId;function Fv(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),p((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,a)));let l=o.current,[u,c]=r.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=r.useCallback((e=>{f&&Mv?Mv((()=>c(e))):c(e)}),[c,f]);return r.useLayoutEffect((()=>l.listen(m)),[l,m]),r.createElement(ne,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Vv,zv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Vv||(Vv={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(zv||(zv={}));s.createRoot(document.getElementById("root")).render((0,se.jsx)(r.StrictMode,{children:(0,se.jsx)(Fv,{children:(0,se.jsx)(re,{children:(0,se.jsx)(te,{path:"/*",element:(0,se.jsx)(Pv,{})})})})})),Lv()})()})();
//# sourceMappingURL=main.e831e86d.js.map